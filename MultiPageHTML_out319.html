<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_346.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_346.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.1653em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Choosing a Load-Balancing Algorithm &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:6.065em;"><span class="stl_154 stl_32 stl_87" style="word-spacing:0.1418em;">There are many different algorithms to determine which server should receive the &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:7.115em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0413em;">next connection. Each vendor uses different terminology, but this list should provide &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:8.165em;"><span class="stl_154 stl_32 stl_356" style="word-spacing:0.0167em;">an idea of what’s available: &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:9.787em;"><span class="stl_155 stl_41 stl_93">Random &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:10.8484em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.1082em;">The load balancer directs each request to a server selected at random from the &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:11.8984em;"><span class="stl_154 stl_32 stl_102" style="word-spacing:-0.0012em;">pool of available servers. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:13.5203em;"><span class="stl_155 stl_41 stl_136">Round-robin &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:14.5817em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.0055em;">The load balancer sends requests to servers in a repeating sequence: A, B, C, A, B, &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:15.6317em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">C, and so on. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:17.2537em;"><span class="stl_155 stl_41 stl_226" style="word-spacing:0.0155em;">Fewest connections &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:18.315em;"><span class="stl_154 stl_32 stl_102" style="word-spacing:-0.0011em;">The next connection goes to the server with the fewest active connections. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:19.937em;"><span class="stl_155 stl_41 stl_190" style="word-spacing:0.018em;">Fastest response &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:20.9984em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.0785em;">The server that has been handling requests the fastest receives the next connec‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:22.0484em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0145em;">tion. This can work well when the pool contains a mix of fast and slow machines. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5004em;top:23.0984em;"><span class="stl_154 stl_32 stl_85" style="word-spacing:0.0175em;">However, it’s very tricky with SQL when the query complexity varies widely. Even &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:24.1484em;"><span class="stl_154 stl_32 stl_126" style="word-spacing:0.0394em;">the same query can perform very differently under different circumstances, such &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:25.1984em;z-index:798;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0215em;">as when it’s served from the query cache or when the server</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0196em;">s </span><span class="stl_154 stl_32 stl_28">c</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0196em;">aches already con‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:26.2484em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0027em;">tain the needed data. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:27.8703em;"><span class="stl_155 stl_41 stl_09">Hashed &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:28.9317em;z-index:875;"><span class="stl_154 stl_32 stl_143" style="word-spacing:0.1342em;">The load balancer hashes the connection</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1285em;">s </span><span class="stl_154 stl_32 stl_28">s</span><span class="stl_154 stl_32 stl_95" style="word-spacing:0.1303em;">ource IP address, which maps it to &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:29.9817em;"><span class="stl_154 stl_32 stl_102" style="word-spacing:0.1028em;">one of the servers in the pool. Each time a connection request comes from the &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:31.0317em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.1849em;">same IP address, the load balancer sends it to the same server. The bindings &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:32.0817em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.0011em;">change only when the number of machines in the pool does. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:33.7037em;z-index:1079;"><span class="stl_155 stl_41 stl_497">W</span><span class="stl_155 stl_41 stl_28">e</span><span class="stl_155 stl_41 stl_475">ighted &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:34.7651em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.1951em;">The load balancer can combine and add weight to several of the other algo‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5004em;top:35.8151em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0488em;">rithms. For example, you might have single- and dual-CPU machines. The dual- &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:36.8651em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0197em;">CPU machines are roughly twice as powerful, so you can tell the load balancer to &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:37.9151em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0027em;">send them an average of twice as many requests. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:39.4651em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.1742em;">The best algorithm for MySQL depends on your workload. The least-connections &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:40.5151em;"><span class="stl_154 stl_32 stl_87" style="word-spacing:0.0912em;">algorithm, for example, might flood new servers when you add them to the pool of &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:41.5651em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.001em;">available servers before their caches are warmed up. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:43.1151em;z-index:1495;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_122" style="word-spacing:0.0323em;">u’ll need to experiment to find the best performance for your workload. Be sure to &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:44.1651em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.1081em;">consider what happens under extraordinary circumstances as well as in the day-to- &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:45.2151em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.1014em;">day norm. It is in those extraordinary circumstances—for example, during times of &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:46.2651em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0519em;">high query load, when you’re doing schema changes, or when an unusual number of &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:47.3151em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:-0.0004em;">servers go offline—that you can least afford something going terribly wrong. &nbsp;</span></div>
					<div class="stl_01" style="left:25.9949em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Scaling Reads with Read Pools &nbsp;</span></div>
					<div class="stl_01" style="left:34.1744em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:35.0819em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">297 &nbsp;</span></div>
					<a name="319_0" style="position:absolute;left:0em;top:4.4583em;">&nbsp;</a>
					<a name="319_1" style="position:absolute;left:0em;top:6.2943em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>