<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_95.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_95.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:7.4167em;top:4.5292em;"><span class="stl_200 stl_171 stl_28">| tid | user &nbsp;</span></div>
					<div class="stl_01" style="left:7.4167em;top:5.3792em;"><span class="stl_200 stl_171 stl_28">+-----+----------------------------+------------+-----------------+ &nbsp;</span></div>
					<div class="stl_01" style="left:19.8125em;top:4.5292em;"><span class="stl_200 stl_171 stl_28">| ca &nbsp;</span></div>
					<div class="stl_01" style="left:24.4167em;top:4.5292em;"><span class="stl_200 stl_171 stl_28">| total_allocated | &nbsp;</span></div>
					<div class="stl_01" style="left:7.4167em;top:6.2292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:7.4167em;top:7.0792em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:7.4167em;top:7.9292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:7.4167em;top:8.7792em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:7.4167em;top:9.6292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:7.4167em;top:10.4792em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:7.4167em;top:11.3292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:7.4167em;top:12.1792em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:7.4167em;top:13.0292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:8.4792em;top:6.2292em;"><span class="stl_200 stl_171 stl_28">52 | sveta@localhost &nbsp;</span></div>
					<div class="stl_01" style="left:8.8333em;top:7.0792em;"><span class="stl_200 stl_171 stl_28">1 | sql/main &nbsp;</span></div>
					<div class="stl_01" style="left:8.4792em;top:7.9292em;"><span class="stl_200 stl_171 stl_28">33 | innodb/clone_gtid_thread &nbsp;</span></div>
					<div class="stl_01" style="left:8.4792em;top:8.7792em;"><span class="stl_200 stl_171 stl_28">44 | sql/event_scheduler &nbsp;</span></div>
					<div class="stl_01" style="left:8.4792em;top:9.6292em;"><span class="stl_200 stl_171 stl_28">43 | sql/slave_sql &nbsp;</span></div>
					<div class="stl_01" style="left:8.4792em;top:10.4792em;"><span class="stl_200 stl_171 stl_28">42 | sql/slave_io &nbsp;</span></div>
					<div class="stl_01" style="left:8.4792em;top:11.3292em;"><span class="stl_200 stl_171 stl_28">48 | sql/compress_gtid_table &nbsp;</span></div>
					<div class="stl_01" style="left:8.4792em;top:12.1792em;"><span class="stl_200 stl_171 stl_28">25 | innodb/fts_optimize_thread | 1.92 KiB &nbsp;</span></div>
					<div class="stl_01" style="left:8.4792em;top:13.0292em;"><span class="stl_200 stl_171 stl_28">34 | innodb/srv_purge_thread</span><span class="stl_200 stl_171 stl_28" style="word-spacing:1.5em;">&nbsp;</span><span class="stl_200 stl_171 stl_28">| 1.56 KiB &nbsp;</span></div>
					<div class="stl_01" style="left:19.8125em;top:6.2292em;"><span class="stl_200 stl_171 stl_28">| 1.36 MiB &nbsp;</span></div>
					<div class="stl_01" style="left:19.8125em;top:7.0792em;"><span class="stl_200 stl_171 stl_28">| 1.02 MiB &nbsp;</span></div>
					<div class="stl_01" style="left:24.4167em;top:6.2292em;"><span class="stl_200 stl_171 stl_28">| 10.18 MiB &nbsp;</span></div>
					<div class="stl_01" style="left:24.4167em;top:7.0792em;"><span class="stl_200 stl_171 stl_28">| 4.95 MiB &nbsp;</span></div>
					<div class="stl_01" style="left:30.7917em;top:6.2292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:30.7917em;top:7.0792em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:30.7917em;top:7.9292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:30.7917em;top:8.7792em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:30.7917em;top:9.6292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:30.7917em;top:10.4792em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:30.7917em;top:11.3292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:30.7917em;top:12.1792em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:30.7917em;top:13.0292em;"><span class="stl_200 stl_171 stl_28">|</span></div>
					<div class="stl_01" style="left:19.8125em;top:7.9292em;"><span class="stl_200 stl_171 stl_28">| 525.36 KiB | 24.04 MiB &nbsp;</span></div>
					<div class="stl_01" style="left:19.8125em;top:8.7792em;"><span class="stl_200 stl_171 stl_28">| 145.72 KiB | 4.23 MiB &nbsp;</span></div>
					<div class="stl_01" style="left:19.8125em;top:9.6292em;"><span class="stl_200 stl_171 stl_28">| 48.74 KiB</span><span class="stl_200 stl_171 stl_28" style="word-spacing:0.5em;">&nbsp;</span><span class="stl_200 stl_171 stl_28">| 142.46 KiB &nbsp;</span></div>
					<div class="stl_01" style="left:19.8125em;top:10.4792em;"><span class="stl_200 stl_171 stl_28">| 20.03 KiB</span><span class="stl_200 stl_171 stl_28" style="word-spacing:0.5em;">&nbsp;</span><span class="stl_200 stl_171 stl_28">| 232.23 KiB &nbsp;</span></div>
					<div class="stl_01" style="left:19.8125em;top:11.3292em;"><span class="stl_200 stl_171 stl_28">| 13.91 KiB</span><span class="stl_200 stl_171 stl_28" style="word-spacing:0.5em;">&nbsp;</span><span class="stl_200 stl_171 stl_28">| 17.06 KiB &nbsp;</span></div>
					<div class="stl_01" style="left:24.4167em;top:12.1792em;"><span class="stl_200 stl_171 stl_28">| 2.00 KiB &nbsp;</span></div>
					<div class="stl_01" style="left:24.4167em;top:13.0292em;"><span class="stl_200 stl_171 stl_28">| 1.64 KiB &nbsp;</span></div>
					<div class="stl_01" style="left:7.4167em;top:13.8792em;"><span class="stl_200 stl_171 stl_28">+-----+----------------------------+------------+-----------------+ &nbsp;</span></div>
					<div class="stl_01" style="left:7.4167em;top:14.7292em;"><span class="stl_200 stl_171 stl_28">9 rows in set (0,03 sec) &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:15.8666em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0116em;">The preceding example is taken on a laptop; therefore, numbers are not descriptive of &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:16.9166em;z-index:692;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.0699em;">a production server. It is still clear that a local connection uses most of the memory, &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:17.9666em;"><span class="stl_154 stl_32 stl_141" style="word-spacing:-0.0023em;">followed by the main server process. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:19.5166em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.004em;">The memory instrumentation is handy when you need to find a user thread that takes &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:20.5666em;"><span class="stl_154 stl_32 stl_77" style="word-spacing:0.1348em;">the most memory. In the following example, a user connection allocated 36 GB of &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:21.6166em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:-0.0005em;">RAM, which is quite huge even in modern high-memory systems: &nbsp;</span></div>
					<div class="stl_01" style="left:7.4166em;top:23.3785em;"><span class="stl_200 stl_171 stl_28">mysql&gt; </span><span class="stl_265 stl_173 stl_28">SELECT * FROM sys.memory_by_thread_by_current_bytes &nbsp;</span></div>
					<div class="stl_01" style="left:8.8333em;top:24.2285em;"><span class="stl_200 stl_171 stl_28">-&gt; </span><span class="stl_265 stl_173 stl_28">ORDER BY current_allocated desc\G &nbsp;</span></div>
					<div class="stl_01" style="left:7.4166em;top:25.0792em;"><span class="stl_200 stl_171 stl_28">*************************** 1. row *************************** &nbsp;</span></div>
					<div class="stl_01" style="left:7.7708em;top:25.9292em;"><span class="stl_200 stl_171 stl_28">thread_id: 152 &nbsp;</span></div>
					<div class="stl_01" style="left:7.7708em;top:26.7792em;"><span class="stl_200 stl_171 stl_28">user: lj@127.0.0.1 &nbsp;</span></div>
					<div class="stl_01" style="left:7.7708em;top:27.6292em;"><span class="stl_200 stl_171 stl_28">current_count_used: 325 &nbsp;</span></div>
					<div class="stl_01" style="left:7.7708em;top:28.4792em;"><span class="stl_200 stl_171 stl_28">current_allocated: 36.00 GiB &nbsp;</span></div>
					<div class="stl_01" style="left:7.7708em;top:29.3292em;"><span class="stl_200 stl_171 stl_28">current_avg_alloc: 113.43 MiB &nbsp;</span></div>
					<div class="stl_01" style="left:7.7708em;top:30.1792em;"><span class="stl_200 stl_171 stl_28">current_max_alloc: 36.00 GiB &nbsp;</span></div>
					<div class="stl_01" style="left:7.7708em;top:31.0292em;"><span class="stl_200 stl_171 stl_28">total_allocated: 37.95 GiB &nbsp;</span></div>
					<div class="stl_01" style="left:7.4166em;top:31.8792em;"><span class="stl_200 stl_171 stl_28">... &nbsp;</span></div>
					<div class="stl_01" style="left:6.0006em;top:33.3509em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Examining Variables &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:35.2507em;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.2551em;">Performance Schema brings variable instrumentation to a new level. It provides &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:36.3007em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0016em;">instrumentation for: &nbsp;</span></div>
					<div class="stl_01" style="left:6.721em;top:38.184em;"><span class="stl_154 stl_32 stl_314" style="word-spacing:0.2614em;">• Server</span><span class="stl_154 stl_32 stl_28" style="word-spacing:-0.0058em;">&nbsp;</span><span class="stl_154 stl_32 stl_28">variables &nbsp;</span></div>
					<div class="stl_01" style="left:7.5891em;top:39.5674em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:-0.0131em;">— Global &nbsp;</span></div>
					<div class="stl_01" style="left:7.5891em;top:40.9507em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:-0.001em;">— Session, for all currently opened sessions &nbsp;</span></div>
					<div class="stl_01" style="left:7.5891em;top:42.334em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0002em;">— Source, from which all current variable values originate &nbsp;</span></div>
					<div class="stl_01" style="left:6.7213em;top:43.7174em;"><span class="stl_154 stl_32 stl_55" style="word-spacing:0.2803em;">• Status</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0038em;">&nbsp;</span><span class="stl_154 stl_32 stl_28">variables &nbsp;</span></div>
					<div class="stl_01" style="left:7.5891em;top:45.1007em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:-0.0131em;">— Global &nbsp;</span></div>
					<div class="stl_01" style="left:7.5891em;top:46.484em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:-0.0009em;">— Session, for all currently open sessions &nbsp;</span></div>
					<div class="stl_01" style="left:7.5891em;top:47.8673em;"><span class="stl_154 stl_32 stl_77" style="word-spacing:-0.0034em;">— Aggregations by &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">66 &nbsp;</span></div>
					<div class="stl_01" style="left:7.3618em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.2693em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 3: Performance Schema &nbsp;</span></div>
					<a name="88_0" style="position:absolute;left:0em;top:33.644em;">&nbsp;</a>
					<a name="88_1" style="position:absolute;left:0em;top:21.8458em;">&nbsp;</a>
					<a name="88_2" style="position:absolute;left:0em;top:35.4799em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>