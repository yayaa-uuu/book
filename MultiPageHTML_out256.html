<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_274.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_274.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.3166em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.002em;">are just a few of the added complexities you should address when introducing delayed &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:5.3666em;"><span class="stl_154 stl_32 stl_28">replicas. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:7.2509em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Multithreaded Replication &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:9.1507em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0265em;">One of the historical challenges with replication was that, while you could take paral‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:10.2007em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.1298em;">lel writes on your source, your replicas were single threaded. Modern MySQL ver‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:11.2507em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.1688em;">sions offer multithreaded replication (see </span><a href="MultiPageHTML_out256.html#256_1"><span class="stl_184 stl_32 stl_28" style="word-spacing:0.1665em;">Figure 9-2</span></a><span class="stl_154 stl_32 stl_57" style="word-spacing:0.1688em;">) where you can run multiple &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:12.3007em;z-index:378;"><span class="stl_154 stl_32 stl_47" style="word-spacing:0.006em;">SQL applier threads to apply changes from the relay log locally. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:29.9352em;"><span class="stl_155 stl_41 stl_45" style="word-spacing:0.0184em;">Figure 9-2. Multithreaded replication setup &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:32.046em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.1508em;">There are two modes for multithreaded replication: </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.1045em;">DATABASE </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1487em;">and </span><span class="stl_170 stl_171 stl_28">LOGICAL_CLOCK</span><span class="stl_154 stl_32 stl_28">. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:33.1454em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1962em;">The </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0546em;">DATABASE </span><span class="stl_154 stl_32 stl_77" style="word-spacing:0.1994em;">option uses multiple threads to update different databases; no two &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:34.1954em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.1166em;">threads will update the same database at the same time. This method works well if &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:35.2454em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.1001em;">you spread your data across multiple databases in MySQL and update them consis‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:36.3449em;"><span class="stl_154 stl_32 stl_43" style="word-spacing:0.1819em;">tently and concurrently. The other option, </span><span class="stl_170 stl_171 stl_28">LOGICAL_CLOCK</span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.1769em;">, allows parallel updates &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:37.3949em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.1956em;">against the same database as long as they are part of the same binary log group &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:38.4449em;"><span class="stl_154 stl_32 stl_28">commit. &nbsp;</span></div>
					<div class="stl_01" style="left:13.563em;top:41.0454em;"><span class="stl_239 stl_27 stl_28" style="word-spacing:0em;">What Is a Binary Log Group Commit? &nbsp;</span></div>
					<div class="stl_01" style="left:6.6876em;top:42.7933em;"><span class="stl_31 stl_32 stl_105" style="word-spacing:0.2981em;">To </span><span class="stl_31 stl_32 stl_28">b</span><span class="stl_31 stl_32 stl_148" style="word-spacing:0.1103em;">est explain this, we’re going to use an excellent </span><a href="https://oreil.ly/WiSps" target="_blank"><span class="stl_471 stl_32 stl_87" style="word-spacing:0.1025em;">analogy by Morgan </span></a><a href="https://oreil.ly/WiSps" target="_blank"><span class="stl_471 stl_32 stl_105">T</span></a><a href="https://oreil.ly/WiSps" target="_blank"><span class="stl_471 stl_32 stl_28">o</span></a><a href="https://oreil.ly/WiSps" target="_blank"><span class="stl_471 stl_32 stl_310" style="word-spacing:0.0901em;">cker: </span></a><span class="stl_31 stl_32 stl_28">the &nbsp;</span></div>
					<div class="stl_01" style="left:6.6876em;top:43.7933em;"><span class="stl_31 stl_32 stl_158" style="word-spacing:0.0007em;">example of a single ferry trying to ship passengers from point A to point B. &nbsp;</span></div>
					<div class="stl_01" style="left:6.6876em;top:45.2933em;"><span class="stl_31 stl_32 stl_88" style="word-spacing:0.1452em;">In MySQL 5.0, the ferry will pick up the next passenger in line from point A and &nbsp;</span></div>
					<div class="stl_01" style="left:6.6876em;top:46.2933em;"><span class="stl_31 stl_32 stl_57" style="word-spacing:0.0908em;">transfer them to point B. The trip between A and B takes about a 10-minute return &nbsp;</span></div>
					<div class="stl_01" style="left:6.6876em;top:47.2933em;"><span class="stl_31 stl_32 stl_84" style="word-spacing:0.0324em;">trip, so it’s possible that several new passengers will arrive while the ferry is in transit. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">234 &nbsp;</span></div>
					<div class="stl_01" style="left:7.6684em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.5759em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:-0.0005em;">Chapter 9: Replication &nbsp;</span></div>
					<a name="256_0" style="position:absolute;left:0em;top:7.544em;">&nbsp;</a>
					<a name="256_1" style="position:absolute;left:0em;top:13.9924em;">&nbsp;</a>
					<a name="256_2" style="position:absolute;left:0em;top:43.0116em;">&nbsp;</a>
					<a name="256_3" style="position:absolute;left:0em;top:9.3799em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>