<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_34.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_34.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.3166em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0574em;">another process comes along between lines 3 and 4 and removes the entire checking &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:5.3666em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0315em;">account balance? The bank has given the customer a $200 credit without even know‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:6.4166em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">ing it. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:7.9666em;z-index:211;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0087em;">And there are a lot more failure possibilities in this sequence of operations. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.008em;">u could &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:9.0166em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.0534em;">see connection drops, timeouts, or even a crash of the database server running them &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:10.0666em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0714em;">midway through the operations. This is typically why highly complex and slow two- &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:11.1166em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0007em;">phase-commit systems exist: to mitigate against all sorts of failure scenarios. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:12.6666em;"><span class="stl_154 stl_32 stl_107" style="word-spacing:0.0772em;">Transactions aren’t enough unless the system passes the ACID test. ACID stands for &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:13.7166em;"><span class="stl_154 stl_32 stl_108" style="word-spacing:0.0091em;">atomicity, consistency, isolation, and durability. These are tightly related criteria that a &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:14.7666em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0019em;">data-safe transaction processing system must meet: &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:16.3885em;"><span class="stl_155 stl_41 stl_42">Atomicity &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:17.4499em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0356em;">A transaction must function as a single indivisible unit of work so that the entire &nbsp;</span></div>
					<div class="stl_01" style="left:7.5004em;top:18.4999em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0574em;">transaction is either applied or never committed. When transactions are atomic, &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:19.5499em;z-index:823;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0021em;">there is no such thing as a partially completed transaction: it</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">s </span><span class="stl_154 stl_32 stl_28">a</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">ll or nothing. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:21.1719em;"><span class="stl_155 stl_41 stl_47">Consistency &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:22.2333em;"><span class="stl_154 stl_32 stl_97" style="word-spacing:0.1067em;">The database should always move from one consistent state to the next. In our &nbsp;</span></div>
					<div class="stl_01" style="left:7.5003em;top:23.2833em;"><span class="stl_154 stl_32 stl_71" style="word-spacing:0.0621em;">example, consistency ensures that a crash between lines 3 and 4 doesn’t result in &nbsp;</span></div>
					<div class="stl_01" style="left:7.4998em;top:24.3333em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.1267em;">$200 disappearing from the checking account. If the transaction is never com‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:25.3833em;z-index:1074;"><span class="stl_154 stl_32 stl_43" style="word-spacing:0.0071em;">mitted, none of the transaction</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">s </span><span class="stl_154 stl_32 stl_28">c</span><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0013em;">hanges are ever reflected in the database. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:27.0052em;"><span class="stl_155 stl_41 stl_201">Isolation &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:28.0666em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.1246em;">The results of a transaction are usually invisible to other transactions until the &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:29.1166em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.0658em;">transaction is complete. This ensures that if a bank account summary runs after &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:30.1666em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0921em;">line 3 but before line 4 in our example, it will still see the $200 in the checking &nbsp;</span></div>
					<div class="stl_01" style="left:7.5004em;top:31.2166em;"><span class="stl_154 stl_32 stl_114" style="word-spacing:0.0574em;">account. When we discuss isolation levels later in this chapter, you’ll understand &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:32.2666em;z-index:1422;"><span class="stl_154 stl_32 stl_138" style="word-spacing:0.0075em;">why we said “usually invisible</span><span class="stl_154 stl_32 stl_161">.</span><span class="stl_154 stl_32 stl_161">” &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:33.8886em;"><span class="stl_155 stl_41 stl_202">Durability &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:34.9499em;z-index:1460;"><span class="stl_154 stl_32 stl_43" style="word-spacing:0.0329em;">Once committed, a transaction</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0257em;">s </span><span class="stl_154 stl_32 stl_28">c</span><span class="stl_154 stl_32 stl_53" style="word-spacing:0.027em;">hanges are permanent. This means the changes &nbsp;</span></div>
					<div class="stl_01" style="left:7.5003em;top:35.9999em;"><span class="stl_154 stl_32 stl_124" style="word-spacing:0.1036em;">must be recorded such that data won’t be lost in a system crash. Durability is a &nbsp;</span></div>
					<div class="stl_01" style="left:7.4998em;top:37.0499em;"><span class="stl_154 stl_32 stl_72" style="word-spacing:0.199em;">slightly fuzzy concept, however, because there are actually many levels. Some &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:38.0999em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0291em;">durability strategies provide a stronger safety guarantee than others, and nothing &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:39.1499em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.1268em;">is ever 100% durable (if the database itself were truly durable, then how could &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:40.1999em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">backups increase durability?). &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:41.7499em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0417em;">ACID transactions and the guarantees provided through them in the InnoDB engine &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:42.7999em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0538em;">specifically are one of the strongest and most mature features in MySQL. While they &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:43.8499em;"><span class="stl_154 stl_32 stl_77" style="word-spacing:0.127em;">come with certain throughput trade-offs, when applied appropriately they can save &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:44.8999em;z-index:2065;"><span class="stl_154 stl_32 stl_138" style="word-spacing:0.0075em;">you from implementing a lot of complex logic in the application layer. &nbsp;</span></div>
					<div class="stl_01" style="left:30.9319em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">Transactions &nbsp;</span></div>
					<div class="stl_01" style="left:34.7862em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:35.6937em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">7</span></div>
					<a name="29_0" style="position:absolute;left:0em;top:12.8958em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>