<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_357.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_357.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:5.9999em;top:4.2435em;"><span class="stl_193 stl_27 stl_28" style="word-spacing:0em;">Migrating your stack to Vitess &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:5.7109em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0476em;">Vitess is an opinionated platform for running the database layer and is not a drop-in &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:6.7609em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0745em;">solution. Therefore, you need to plan thoughtfully how implementing such a transi‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:7.8109em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0023em;">tion would happen before you adopt it as the access layer for your database. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:9.3609em;"><span class="stl_154 stl_32 stl_114" style="word-spacing:0.0049em;">Specifically, be sure to consider the following migration steps as you evaluate Vitess as &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:10.4109em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">a possible solution: &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:12.0329em;z-index:407;"><span class="stl_155 stl_41 stl_28" style="word-spacing:0em;">1. </span><span class="stl_155 stl_41 stl_52">T</span><span class="stl_155 stl_41 stl_475" style="word-spacing:0.0192em;">est and document the latency you’re introducing to the overall system. &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:13.0943em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.0286em;">Introducing a complex stack like Vitess to an application stack will definitely add &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:14.1443em;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.0669em;">some amount of latency, especially when you consider the enforcement of semi‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:15.1943em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0258em;">sync replication. Make sure this trade-off is well documented and explicitly com‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:16.2443em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.4689em;">municated so that your downstream dependencies are making informed &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:17.2943em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0015em;">decisions when building SLOs that rely on this database architecture. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:18.9162em;"><span class="stl_155 stl_41 stl_248" style="word-spacing:0.0208em;">2. Use the </span><a href="https://oreil.ly/ldtnN" target="_blank"><span class="stl_163 stl_41 stl_152" style="word-spacing:0.0114em;">canary deployment model</span></a><span class="stl_155 stl_41 stl_152" style="word-spacing:0.0114em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:19.9662em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1857em;">During the transition in production, you can configure </span><span class="stl_155 stl_41 stl_181" style="word-spacing:0.1946em;">vttablet </span><span class="stl_154 stl_32 stl_98" style="word-spacing:0.2008em;">as “externally &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:21.0162em;z-index:898;"><span class="stl_154 stl_32 stl_28">managed</span><span class="stl_154 stl_32 stl_161">.</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1291em;">” This allows for both </span><span class="stl_155 stl_41 stl_181" style="word-spacing:0.138em;">vttablet </span><span class="stl_154 stl_32 stl_78" style="word-spacing:0.1305em;">and direct connections to the database &nbsp;</span></div>
					<div class="stl_01" style="left:7.5004em;top:22.0776em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.1293em;">server as you slowly ramp up the connection change through your application &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:23.1276em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">node fleet. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:24.7496em;"><span class="stl_155 stl_41 stl_45" style="word-spacing:0.0185em;">3. Start sharding. &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:25.7996em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.039em;">Once all the application layer access is through </span><span class="stl_155 stl_41 stl_152">vtgate</span><span class="stl_154 stl_32 stl_28">/</span><span class="stl_155 stl_41 stl_181" style="word-spacing:0.0445em;">vttablet </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0356em;">and not directly to &nbsp;</span></div>
					<div class="stl_01" style="left:7.5003em;top:26.8609em;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.0467em;">MySQL, you can start using the full feature set of Vitess to split tables off in new &nbsp;</span></div>
					<div class="stl_01" style="left:7.4998em;top:27.9109em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.0573em;">clusters, shard data horizontally for more write throughput, or simply add repli‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:28.9609em;z-index:1284;"><span class="stl_154 stl_32 stl_115" style="word-spacing:0.0084em;">cas for more read load capacity.</span><sup style="top: -0.2917em;"><a href="MultiPageHTML_out328.html#328_1"><span class="stl_166 stl_32 stl_164" style="word-spacing:0.0146em;">6 &nbsp;</span></a></sup></div>
					<div class="stl_01" style="left:5.9998em;top:30.5109em;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.0944em;">Vitess is a powerful database access and management product that has come a long &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:31.5609em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0534em;">way from its early days at Google. It has proven its ability to enable dramatic growth &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:32.6109em;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.0702em;">and a resilient database infrastructure. However, this power and flexibility come at a &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:33.6609em;"><span class="stl_154 stl_32 stl_143" style="word-spacing:0.0918em;">cost of added complexity. Vitess is not as simple as a load balancer passing through &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:34.7109em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0825em;">traffic, and you should weigh the needs of the business with the cost of introducing &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:35.7609em;"><span class="stl_154 stl_32 stl_123" style="word-spacing:0.0052em;">and maintaining a database management tool as complex as Vitess. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:37.6452em;"><span class="stl_180 stl_27 stl_28">ProxySQL &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:39.545em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0357em;">ProxySQL is written specifically for the MySQL protocol and released with a General &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:40.595em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.068em;">Public License (GPL). René Cannaò, a DBA who has consulted for many companies &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:41.645em;"><span class="stl_154 stl_32 stl_138" style="word-spacing:0.1237em;">and a long-time MySQL contributor, is the primary author. It is now a full-fledged &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:42.695em;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.3062em;">company that offers paid support and development contracts of the ProxySQL &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:43.745em;"><span class="stl_154 stl_32 stl_28">product. &nbsp;</span></div>
					<div class="stl_01" style="left:6.095em;top:48.2703em;"><span class="stl_167 stl_32 stl_28">6</span></div>
					<div class="stl_01" style="left:6.6667em;top:48.1878em;"><span class="stl_168 stl_32 stl_73" style="word-spacing:0.002em;">This deployment strategy is explained in detail by Morgan </span><span class="stl_168 stl_32 stl_105">T</span><span class="stl_168 stl_32 stl_28">o</span><span class="stl_168 stl_32 stl_28" style="word-spacing:0em;">cker in a </span><a href="https://www.youtube.com/watch?v=OCS45iy5v1M" target="_blank"><span class="stl_187 stl_32 stl_108" style="word-spacing:0.0093em;">talk at Kubecon 2019</span></a><span class="stl_168 stl_32 stl_108" style="word-spacing:0.0093em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">306 &nbsp;</span></div>
					<div class="stl_01" style="left:7.6684em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.5759em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 11: Scaling MySQL &nbsp;</span></div>
					<a name="328_0" style="position:absolute;left:0em;top:37.9383em;">&nbsp;</a>
					<a name="328_1" style="position:absolute;left:0em;top:48.2792em;">&nbsp;</a>
					<a name="328_2" style="position:absolute;left:0em;top:39.7743em;">&nbsp;</a>
					<a name="328_3" style="position:absolute;left:0em;top:35.9902em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>