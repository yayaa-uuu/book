<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_284.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_284.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.2435em;"><span class="stl_308 stl_27 stl_28">Conﬁguration &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:5.7109em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0199em;">In this topology, we expect that the source and replicas are identical configurations in &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:6.7609em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.0139em;">terms of CPU, memory, and so forth. Over a long enough period, you will need to fail &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:7.8109em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0692em;">over from the current running source to one of the replicas, either for maintenance, &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:8.8609em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0767em;">software upgrade or patching, or even a hardware failure. By having the same hard‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:9.9109em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0159em;">ware and software configuration on replicas, you ensure that you can sustain the traf‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:10.9609em;z-index:415;"><span class="stl_154 stl_32 stl_24" style="word-spacing:0.0055em;">fic capacity and throughput as before you failed over. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:13.0178em;"><span class="stl_193 stl_27 stl_28">Redundancy &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:14.4739em;"><span class="stl_154 stl_32 stl_84" style="word-spacing:0.1753em;">In a physical hardware environment, you really want </span><span class="stl_155 stl_41 stl_28">n</span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.1729em;">+2 redundancy for at least &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:15.5353em;"><span class="stl_154 stl_32 stl_122" style="word-spacing:0.1208em;">three total servers. In the event of a hardware failure, you still have one additional &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:16.5853em;z-index:584;"><span class="stl_154 stl_32 stl_84" style="word-spacing:0.0761em;">server for failover. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_227" style="word-spacing:0.0699em;">u can also use one of the replicas as a backup server if you are &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:17.6353em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">uncomfortable or unable to take backups on your source. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:19.1739em;"><span class="stl_154 stl_32 stl_143" style="word-spacing:0.0442em;">In a cloud environment, you can get away with </span><span class="stl_155 stl_41 stl_28">n</span><span class="stl_154 stl_32 stl_141" style="word-spacing:0.0362em;">+1 redundancy for two total servers &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:20.2239em;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.0036em;">if your data is small enough or you can copy the data easily. Otherwise, </span><span class="stl_155 stl_41 stl_28">n</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">+2 is needed. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:21.2739em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1731em;">If you go the </span><span class="stl_155 stl_41 stl_28">n</span><span class="stl_154 stl_32 stl_140" style="word-spacing:0.1739em;">+1 route, the dynamic provisioning nature of cloud providers can &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:22.3353em;z-index:946;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0301em;">make this easier to manage. For maintenance events like patching, it</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0258em;">s </span><span class="stl_154 stl_32 stl_28">e</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0258em;">asier to provi‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:23.3853em;"><span class="stl_154 stl_32 stl_117" style="word-spacing:0.07em;">sion a third replica on demand, perform any necessary actions on it (like upgrading &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:24.4353em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.1296em;">the kernel or applying a security update), and then replace the other replica. Then &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:25.4853em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0606em;">you fail over and repeat the process on the former source. The goal is to keep a rep‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:26.5353em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0012em;">lica ready to be the target of a failover at all times. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:28.0853em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0269em;">In either case, you can place one of these replicas in a geographically distant location, &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:29.1353em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.0493em;">although you will have to pay attention to replication lag and ensure that it is usable. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:30.1853em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0356em;">Replicas should be recoverable and any data loss within guidelines that you establish. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:31.2353em;z-index:1436;"><span class="stl_154 stl_32 stl_52" style="word-spacing:0.194em;">We </span><span class="stl_154 stl_32 stl_28">t</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">alk about this in </span><a href="MultiPageHTML_out281.html#281_0"><span class="stl_184 stl_32 stl_95" style="word-spacing:0.0019em;">“Defining Recovery Requirements” on page 259 </span></a><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">in </span><a href="MultiPageHTML_out279.html#279_0"><span class="stl_184 stl_32 stl_38" style="word-spacing:0.0047em;">Chapter 10</span></a><span class="stl_154 stl_32 stl_38" style="word-spacing:0.0047em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:33.2922em;"><span class="stl_193 stl_27 stl_28">Caveats &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:34.7596em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0101em;">By choosing this model, you are explicitly binding your read scaling to the capacity of &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:35.8096em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0248em;">a single server. If you hit a read scaling limit, you will have to evolve beyond this top‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:36.8596em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.1484em;">ology—likely into the active/read pool configuration—or you will have to leverage &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:37.9096em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">sharding to reduce reads on the source. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:39.7939em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Active/Read Pool &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:41.6937em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0353em;">In an active/read pool configuration, you direct all writes to the source. Reads can be &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:42.7437em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.001em;">sent to either the source server or the read pool, depending upon application needs. A &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:43.7937em;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.1507em;">read pool allows you to scale reads horizontally for read-intensive applications. At &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:44.8437em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0112em;">some point, the horizontal scaling will fall off due to the demand of replication on the &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:45.8937em;"><span class="stl_154 stl_32 stl_28">source. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:47.4437em;"><a href="MultiPageHTML_out265.html#265_0"><span class="stl_184 stl_32 stl_28" style="word-spacing:0em;">Figure 9-5 </span></a><span class="stl_154 stl_32 stl_88" style="word-spacing:0.0009em;">shows this arrangement with a single source and a replica pool. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">242 &nbsp;</span></div>
					<div class="stl_01" style="left:7.6679em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.5754em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 9: Replication &nbsp;</span></div>
					<a name="264_0" style="position:absolute;left:0em;top:40.087em;">&nbsp;</a>
					<a name="264_1" style="position:absolute;left:0em;top:38.1388em;">&nbsp;</a>
					<a name="264_2" style="position:absolute;left:0em;top:41.9229em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>