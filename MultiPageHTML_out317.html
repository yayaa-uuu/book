<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_344.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_344.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:5.9997em;top:4.3166em;"><span class="stl_154 stl_32 stl_102" style="word-spacing:0.2595em;">three nodes per pool of replicas serving a specific purpose in addition to your &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:5.3666em;"><span class="stl_154 stl_32 stl_112" style="word-spacing:-0.0018em;">backup/reporting server and the source node. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:6.9166em;"><span class="stl_154 stl_32 stl_289" style="word-spacing:0.197em;">Whether you run your own service discovery</span><sup style="top: -0.2917em;"><a href="MultiPageHTML_out317.html#317_1"><span class="stl_166 stl_32 stl_28" style="word-spacing:0.5218em;">4 </span></a></sup><span class="stl_154 stl_32 stl_28" style="word-spacing:0.2009em;">or use something offered by your &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:7.9666em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0532em;">cloud provider, you should be aware of the guarantees of that service. Here are some &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:9.0166em;"><span class="stl_154 stl_32 stl_122" style="word-spacing:0.0698em;">things to consider, whether you will be running service discovery or working with a &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:10.0666em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">team on it: &nbsp;</span></div>
					<div class="stl_01" style="left:6.7212em;top:11.9499em;"><span class="stl_154 stl_32 stl_224" style="word-spacing:0.2978em;">• How</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0125em;">&nbsp;</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">soon can it detect the failure of a host? &nbsp;</span></div>
					<div class="stl_01" style="left:6.7213em;top:13.3333em;"><span class="stl_154 stl_32 stl_224" style="word-spacing:0.2977em;">• How</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0125em;">&nbsp;</span><span class="stl_154 stl_32 stl_24" style="word-spacing:0.0054em;">fast does that data propagate? &nbsp;</span></div>
					<div class="stl_01" style="left:6.7213em;top:14.7166em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.2727em;">• When</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.076em;">&nbsp;</span><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0774em;">there is a database instance failure, how will the configuration refresh on &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:15.7666em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">your load balancer? &nbsp;</span></div>
					<div class="stl_01" style="left:6.7216em;top:17.1499em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.2723em;">• Does</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0265em;">&nbsp;</span><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0281em;">the change of database members happen as a background process, or will it &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:18.1999em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">require severing existing connections? &nbsp;</span></div>
					<div class="stl_01" style="left:6.7216em;top:19.5833em;"><span class="stl_154 stl_32 stl_82" style="word-spacing:0.285em;">• What</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0275em;">&nbsp;</span><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0228em;">happens if service discovery itself is down? Does that impair any new data‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:20.6333em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0687em;">base connections or only impair making changes to load-balancer membership? &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:21.6833em;"><span class="stl_154 stl_32 stl_123" style="word-spacing:0.0052em;">Can you make changes manually at that point? &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:23.5666em;"><span class="stl_154 stl_32 stl_143" style="word-spacing:0.1555em;">With flexibility comes complexity, and you must balance the two for optimal out‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:24.6166em;z-index:912;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.1438em;">comes in production when failures happen. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_95" style="word-spacing:0.1442em;">ur job here is to always tether your &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:25.6666em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.1451em;">decisions to what SLIs and SLOs are being pursued and not to achieve a mythical &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:26.7166em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">100% uptime goal. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:28.2666em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.1402em;">Now that you know how to populate the configurations and update them as hosts &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:29.3166em;"><span class="stl_154 stl_32 stl_99" style="word-spacing:0.0964em;">come and go, it’s time to talk about how to run health checks for the members of a &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:30.3666em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">replica read pool. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0006em;top:32.2509em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Health Checks for Read Pools &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:34.1507em;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.0533em;">At this point, you will need to consider what the acceptable criteria that deem a read &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:35.2007em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.002em;">replica healthy and ready to accept read traffic from the application are. These criteria &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:36.2507em;"><span class="stl_154 stl_32 stl_72" style="word-spacing:0.0856em;">can be as simple as “the database process is up and running, the port responds” but &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:37.3007em;"><span class="stl_154 stl_32 stl_84" style="word-spacing:0.0851em;">can become more complex, such as “the database is up, and replication lag needs to &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:38.3507em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.1378em;">be no more than 30 seconds, and read queries need to be running at a latency no &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:39.4007em;z-index:1553;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">higher than 100 ms</span><span class="stl_154 stl_32 stl_161">.</span><span class="stl_154 stl_32 stl_161">” &nbsp;</span></div>
					<div class="stl_01" style="left:11.3995em;top:41.758em;"><span class="stl_176 stl_32 stl_95" style="word-spacing:0.1317em;">Check the state of the variables </span><span class="stl_212 stl_171 stl_28" style="word-spacing:-0.1243em;">read_only </span><span class="stl_176 stl_32 stl_28" style="word-spacing:0.1299em;">and </span><span class="stl_212 stl_171 stl_28">super_read_only &nbsp;</span></div>
					<div class="stl_01" style="left:11.3988em;top:42.718em;"><span class="stl_176 stl_32 stl_88" style="word-spacing:0.001em;">to make sure that all the members in the read pool of your load bal‐ &nbsp;</span></div>
					<div class="stl_01" style="left:11.3996em;top:43.678em;"><span class="stl_176 stl_32 stl_28" style="word-spacing:0em;">ancer are actually replicas. &nbsp;</span></div>
					<div class="stl_01" style="left:6.095em;top:48.2703em;"><span class="stl_167 stl_32 stl_28">4</span></div>
					<div class="stl_01" style="left:6.6667em;top:48.1878em;"><span class="stl_168 stl_32 stl_53" style="word-spacing:0.0012em;">The most commonly used and our recommendation is </span><a href="https://www.consul.io" target="_blank"><span class="stl_187 stl_32 stl_77" style="word-spacing:0.0032em;">Consul by Hashicorp</span></a><span class="stl_168 stl_32 stl_77" style="word-spacing:0.0032em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:25.9949em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Scaling Reads with Read Pools &nbsp;</span></div>
					<div class="stl_01" style="left:34.1744em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:35.0819em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">295 &nbsp;</span></div>
					<a name="317_0" style="position:absolute;left:0em;top:32.544em;">&nbsp;</a>
					<a name="317_1" style="position:absolute;left:0em;top:48.2792em;">&nbsp;</a>
					<a name="317_2" style="position:absolute;left:0em;top:34.3799em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>