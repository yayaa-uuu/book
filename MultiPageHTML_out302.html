<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_328.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_328.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.7446em;"><span class="stl_60 stl_27 stl_28" style="word-spacing:0em;">Basic backup to directory.</span><span class="stl_60 stl_27 stl_28" style="word-spacing:0.5589em;">&nbsp;</span><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0558em;">The first method we want to show is how you can use Xtra‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:5.8378em;"><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0451em;">Backup to make a full backup of your data into another directory. This allows you to &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:6.8877em;"><span class="stl_154 stl_32 stl_125" style="word-spacing:0.0153em;">choose what you do with the data afterward, which could be another disk, a directory &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:7.9378em;"><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0946em;">on the same disk, or a mounted file share on a larger backup server. Keep in mind, &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:8.9877em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0366em;">doing this kind of full backup will require the appropriate space available to copy the &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:10.0378em;"><span class="stl_154 stl_32 stl_28">files. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:11.5878em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.2211em;">Here is the most basic usage for XtraBackup, specifying the mode (backup) and &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:12.6872em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">where to back up the files (</span><span class="stl_170 stl_171 stl_28">target-dir</span><span class="stl_154 stl_32 stl_28">): &nbsp;</span></div>
					<div class="stl_01" style="left:7.4168em;top:14.4498em;"><span class="stl_200 stl_171 stl_28">$ xtrabackup --backup --target-dir=/backups/ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:15.5872em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.2388em;">Once you execute, the output will look similar to that under </span><a href="MultiPageHTML_out300.html#300_1"><span class="stl_184 stl_32 stl_139" style="word-spacing:0.248em;">“How XtraBackup &nbsp;</span></a></div>
					<div class="stl_01" style="left:6.0003em;top:16.6258em;"><a href="MultiPageHTML_out300.html#300_1"><span class="stl_184 stl_32 stl_222" style="word-spacing:0.0232em;">works” on page 278</span></a><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0165em;">. If successful, the </span><span class="stl_155 stl_41 stl_93" style="word-spacing:0.031em;">/backups </span><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0172em;">directory will contain a complete copy &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:17.6872em;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.0048em;">of your data. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:19.6652em;"><span class="stl_60 stl_27 stl_28" style="word-spacing:0em;">Streaming backup.</span><span class="stl_60 stl_27 stl_28" style="word-spacing:0.6129em;">&nbsp;</span><span class="stl_154 stl_32 stl_87" style="word-spacing:0.1148em;">Copying all files into a new directory may not be the most ideal &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:20.7584em;z-index:730;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0651em;">use case. Sometimes it</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0617em;">s </span><span class="stl_154 stl_32 stl_28">e</span><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0649em;">asier to keep multiple backups in a directory. This is where &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:21.8084em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0165em;">the streaming-backup option can be useful. Streaming allows you to write the backup &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:22.8584em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">out as a single file: &nbsp;</span></div>
					<div class="stl_01" style="left:7.4166em;top:24.6209em;"><span class="stl_200 stl_171 stl_28" style="word-spacing:0em;">$ xtrabackup --backup --stream=xbstream &gt; /backups/backup.xbstream &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:25.8078em;"><span class="stl_154 stl_32 stl_132" style="word-spacing:0.188em;">In this usage, we’ve still specified the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0702em;">backup </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1813em;">mode and removed the </span><span class="stl_170 stl_171 stl_28">target-dir &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:26.9072em;z-index:1032;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">option, since output will be to </span><span class="stl_170 stl_171 stl_28">STDOUT</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">. </span><span class="stl_154 stl_32 stl_52">W</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">e </span><span class="stl_154 stl_32 stl_28">t</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">hen redirected it to a file. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:28.4572em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.1186em;">Note that you could also use a Bash shell command with date to include the time‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:29.5072em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0014em;">stamp in the output filename, like this: &nbsp;</span></div>
					<div class="stl_01" style="left:7.4168em;top:31.2698em;"><span class="stl_200 stl_171 stl_28">$ xtrabackup --backup --stream=xbstream &gt; /backups/backup-$(date +%F).xbstream &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:32.4567em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.0521em;">This will run through the entire backup process as before, with </span><span class="stl_170 stl_171 stl_28">&lt;STDOUT</span><span class="stl_170 stl_171 stl_490">&gt;</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0512em;">being used &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:33.4953em;"><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0032em;">as the destination. The contents will be written to the </span><span class="stl_155 stl_41 stl_59" style="word-spacing:0.0169em;">xbstream </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">file in </span><span class="stl_155 stl_41 stl_65">/backups</span><span class="stl_154 stl_32 stl_65">. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:35.4847em;"><span class="stl_60 stl_27 stl_28" style="word-spacing:0em;">Backup with compression.</span><span class="stl_60 stl_27 stl_28" style="word-spacing:0.5335em;">&nbsp;</span><span class="stl_154 stl_32 stl_123" style="word-spacing:0.0287em;">As we noted previously, you’ll need to have enough space to &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:36.5665em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.1327em;">make an entire copy of your datafiles or enough space for the single </span><span class="stl_155 stl_41 stl_59" style="word-spacing:0.1478em;">xbstream </span><span class="stl_154 stl_32 stl_28">file. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:37.6278em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0413em;">One common option to ease the space requirement is to use the compression feature &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:38.6778em;"><span class="stl_154 stl_32 stl_132" style="word-spacing:0.0065em;">of XtraBackup: &nbsp;</span></div>
					<div class="stl_01" style="left:7.417em;top:40.4404em;"><span class="stl_200 stl_171 stl_28">$ xtrabackup --backup --compress --stream=xbstream &gt; /backups/backup- &nbsp;</span></div>
					<div class="stl_01" style="left:7.417em;top:41.2904em;"><span class="stl_200 stl_171 stl_28">compressed.xbstream &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:42.4278em;z-index:1671;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_83" style="word-spacing:0.1566em;">u will notice that instead of showing “Streaming” for each table, it now reports &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:43.4778em;z-index:1763;"><span class="stl_154 stl_32 stl_114" style="word-spacing:0.052em;">“Compressing and streaming</span><span class="stl_154 stl_32 stl_161">.</span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0492em;">” In our testing, we had loaded the Sakila Sample Data‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:44.5165em;"><span class="stl_154 stl_32 stl_125" style="word-spacing:0.1515em;">base and observed a 94 MB uncompressed </span><span class="stl_155 stl_41 stl_59" style="word-spacing:0.1691em;">xbstream </span><span class="stl_154 stl_32 stl_46" style="word-spacing:0.1548em;">file turn into a 6.5 MB com‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:45.5778em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">pressed one. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">280 &nbsp;</span></div>
					<div class="stl_01" style="left:7.6681em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.5756em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 10: Backup and Recovery &nbsp;</span></div>
				</div>
			</div>
		</div>
	</body>
</html>