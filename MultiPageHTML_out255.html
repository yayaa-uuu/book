<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_272.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_272.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:7.4998em;top:4.366em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1116em;">committed and flushed to disk. Setting this to </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.1436em;">1 </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1116em;">will increase disk write opera‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:5.416em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0013em;">tions while ensuring your data is durable. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:7.2742em;"><span class="stl_170 stl_171 stl_28" style="word-spacing:0em;">sync_binlog = 1 &nbsp;</span></div>
					<div class="stl_01" style="left:7.5003em;top:8.1488em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.1932em;">This variable controls how often MySQL synchronizes the binary log data to &nbsp;</span></div>
					<div class="stl_01" style="left:7.4998em;top:9.2482em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0326em;">disk. Setting this value to </span><span class="stl_170 stl_171 stl_385">1</span><span class="stl_154 stl_32 stl_188" style="word-spacing:0.0312em;">means before every transaction. This protects against &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:10.2982em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.113em;">losing transactions in the event of a server crash. Just like the previous setting, &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:11.3482em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">this will increase disk writes. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:13.2064em;"><span class="stl_170 stl_171 stl_28" style="word-spacing:0em;">relay_log_info_repository = TABLE &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:14.081em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0178em;">MySQL replication used to rely on files on disk to track replication position. This &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:15.131em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0444em;">meant that transactions completed by replication had to synchronize to disk as a &nbsp;</span></div>
					<div class="stl_01" style="left:7.5004em;top:16.181em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0286em;">second step. If a crash happened between a transaction commit and the synchro‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:17.231em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.1346em;">nization, the file on disk would have the incorrect file and position in it. That &nbsp;</span></div>
					<div class="stl_01" style="left:7.5003em;top:18.281em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.076em;">information has moved into InnoDB tables within MySQL itself, allowing repli‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.4998em;top:19.331em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.129em;">cation to update both the transaction and the relay log information within the &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:20.381em;z-index:847;"><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0032em;">same transaction. This creates an atomic action and aids in crash recovery. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:22.2392em;"><span class="stl_170 stl_171 stl_28" style="word-spacing:0em;">relay_log_recovery = ON &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:23.1632em;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.0401em;">Simply put, </span><span class="stl_170 stl_171 stl_28">relay_log_recover</span><span class="stl_170 stl_171 stl_469">y</span><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0391em;">throws away all local relay logs when a crash is &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:24.2132em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0274em;">detected and fetches the missing data from the source. This ensures that any cor‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5004em;top:25.2632em;"><span class="stl_154 stl_32 stl_84" style="word-spacing:0.0815em;">ruption or incomplete relay logs on disk that may have happened in a crash are &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:26.3627em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0055em;">recoverable. This setting also eliminates the need for using </span><span class="stl_170 stl_171 stl_28">sync_relay_lo</span><span class="stl_170 stl_171 stl_199">g</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">as, in &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:27.4127em;z-index:1185;"><span class="stl_154 stl_32 stl_24" style="word-spacing:0.1386em;">the event of a crash, the relay logs are deleted. There</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1332em;">s </span><span class="stl_154 stl_32 stl_28">n</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1332em;">o need to spend extra &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:28.4627em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0013em;">operations synchronizing them to disk. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:30.347em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Delayed Replication &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:32.2467em;z-index:1326;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0433em;">In some scenarios, it can be advantageous to have a delayed replica in your topology. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:33.2967em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.1242em;">This strategy can be used to keep data online and running but keep it consistently &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:34.3962em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0235em;">behind real time by many hours or days. This is configured with the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0.0215em;">CHANGE REPLICA &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:35.4956em;"><span class="stl_170 stl_171 stl_28" style="word-spacing:0em;">TION SOURCE T</span><span class="stl_170 stl_171 stl_186">O</span><span class="stl_154 stl_32 stl_99" style="word-spacing:0.0063em;">statement and the </span><span class="stl_170 stl_171 stl_28">SOURCE_DELA</span><span class="stl_170 stl_171 stl_186">Y</span><span class="stl_154 stl_32 stl_28">option. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:37.0456em;"><span class="stl_154 stl_32 stl_24" style="word-spacing:0.1856em;">Imagine you’re working with a large amount of data and there was an accidental &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:38.0956em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.1606em;">change: a table was dropped. it might take you several hours to restore that from &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:39.1951em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0313em;">backup. With a time-delayed replica, you can find the GTID of the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0em;">DROP TABL</span><span class="stl_170 stl_171 stl_470">E</span><span class="stl_154 stl_32 stl_55">state‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:40.2451em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0134em;">ment and catch replication up to the point just prior to that table being dropped. This &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:41.2951em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0023em;">often can lead to much faster remediation times. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:42.8451em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0379em;">Nothing comes without trade-offs, though. While delayed replication can be tremen‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:43.8951em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.1467em;">dously useful in mitigating certain data-loss scenarios, it also brings complexity to &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:44.9451em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.1401em;">many other operational aspects. If you decide you need to use delayed replication, &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:45.995em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0929em;">you should also consider how to properly exclude this delayed replica from being a &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:47.045em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.0723em;">source node candidate (if your write failover is automated, this is even more impor‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:48.095em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0801em;">tant), how you monitor replication, and how that handles this special replica. These &nbsp;</span></div>
					<div class="stl_01" style="left:26.6347em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Replication Under the Hood &nbsp;</span></div>
					<div class="stl_01" style="left:34.1745em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:35.082em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">233 &nbsp;</span></div>
					<a name="255_0" style="position:absolute;left:0em;top:30.64em;">&nbsp;</a>
					<a name="255_1" style="position:absolute;left:0em;top:32.476em;">&nbsp;</a>
					<a name="255_2" style="position:absolute;left:0em;top:14.3103em;">&nbsp;</a>
					<a name="255_3" style="position:absolute;left:0em;top:23.3925em;">&nbsp;</a>
					<a name="255_4" style="position:absolute;left:0em;top:8.378em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>