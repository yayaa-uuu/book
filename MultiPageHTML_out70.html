<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_77.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_77.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.366em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.157em;">The </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0958em;">threads </span><span class="stl_154 stl_32 stl_88" style="word-spacing:0.158em;">table could be joined to the many other tables to provide additional &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:5.416em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.2687em;">information about the running query (e.g., query data, locks, mutexes, or table &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:6.466em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">instances open). &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:8.016em;"><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0483em;">In the rest of the chapter, I expect you to be familiar with this table and the meaning &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:9.1155em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">of </span><span class="stl_170 stl_171 stl_28">THREAD_ID</span><span class="stl_154 stl_32 stl_28">. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0006em;top:11.012em;"><span class="stl_160 stl_27 stl_28">Conﬁguration &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:13.2822em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0986em;">A few portions of Performance Schema can only be changed at server startup: ena‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:14.3322em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.1713em;">bling or disabling of Performance Schema itself and variables relating to memory &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:15.3822em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.1018em;">usage and limits for data collected. The Performance Schema instruments and con‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:16.4322em;z-index:491;"><span class="stl_154 stl_32 stl_72" style="word-spacing:0.0044em;">sumers can be enabled or disabled dynamically. &nbsp;</span></div>
					<div class="stl_01" style="left:11.3994em;top:18.7443em;z-index:493;"><span class="stl_176 stl_32 stl_109">Y</span><span class="stl_176 stl_32 stl_28">o</span><span class="stl_176 stl_32 stl_74" style="word-spacing:0.0662em;">u can start Performance Schema with all consumers and instru‐ &nbsp;</span></div>
					<div class="stl_01" style="left:11.3994em;top:19.7043em;"><span class="stl_176 stl_32 stl_95" style="word-spacing:0.1662em;">ments disabled and enable only those that are needed to resolve &nbsp;</span></div>
					<div class="stl_01" style="left:11.3995em;top:20.6643em;"><span class="stl_176 stl_32 stl_95" style="word-spacing:0.1868em;">specific issues right before you expect the issue to happen. This &nbsp;</span></div>
					<div class="stl_01" style="left:11.3995em;top:21.6243em;"><span class="stl_176 stl_32 stl_138" style="word-spacing:0.228em;">way, you will not spend any resources on Performance Schema &nbsp;</span></div>
					<div class="stl_01" style="left:11.3995em;top:22.5843em;"><span class="stl_176 stl_32 stl_227" style="word-spacing:0.0906em;">where you do not need to or run the risk of starving your system &nbsp;</span></div>
					<div class="stl_01" style="left:11.3996em;top:23.5443em;"><span class="stl_176 stl_32 stl_72" style="word-spacing:0.0044em;">because of overinstrumentation. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9994em;top:25.5909em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Enabling and Disabling Performance Schema &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:27.5401em;"><span class="stl_154 stl_32 stl_105" style="word-spacing:0.21em;">To </span><span class="stl_154 stl_32 stl_28">e</span><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0156em;">nable or disable Performance Schema, set the variable </span><span class="stl_170 stl_171 stl_28">performance_schem</span><span class="stl_170 stl_171 stl_276">a</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0143em;">to </span><span class="stl_170 stl_171 stl_28">ON &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:28.6395em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0745em;">or </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.1826em;">OFF </span><span class="stl_154 stl_32 stl_48" style="word-spacing:0.0781em;">correspondingly. This is a read-only variable that can be changed only in the &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:29.6895em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0008em;">configuration file or via a command-line parameter when MySQL server starts. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0006em;top:31.5738em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Enabling and Disabling Instruments &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:33.4736em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0486em;">Instruments can be either enabled or disabled. </span><span class="stl_154 stl_32 stl_105">T</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0474em;">o </span><span class="stl_154 stl_32 stl_28">s</span><span class="stl_154 stl_32 stl_48" style="word-spacing:0.051em;">ee the state of an instrument, you &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:34.573em;"><span class="stl_154 stl_32 stl_277" style="word-spacing:-0.0073em;">can query the </span><span class="stl_170 stl_171 stl_28">setup_instrument</span><span class="stl_170 stl_171 stl_186">s</span><span class="stl_154 stl_32 stl_28">table: &nbsp;</span></div>
					<div class="stl_01" style="left:7.417em;top:36.3356em;"><span class="stl_200 stl_171 stl_28">mysql&gt; SELECT * FROM performance_schema.setup_instruments &nbsp;</span></div>
					<div class="stl_01" style="left:8.8336em;top:37.1856em;"><span class="stl_200 stl_171 stl_28">-&gt; WHERE NAME='statement/sql/select'\G &nbsp;</span></div>
					<div class="stl_01" style="left:7.417em;top:38.0356em;"><span class="stl_200 stl_171 stl_28">*************************** 1. row *************************** &nbsp;</span></div>
					<div class="stl_01" style="left:7.7711em;top:38.8856em;"><span class="stl_200 stl_171 stl_28">NAME: statement/sql/select &nbsp;</span></div>
					<div class="stl_01" style="left:7.7711em;top:39.7356em;"><span class="stl_200 stl_171 stl_28" style="word-spacing:0em;">ENABLED: NO &nbsp;</span></div>
					<div class="stl_01" style="left:7.7711em;top:40.5856em;"><span class="stl_200 stl_171 stl_28">TIMED: YES &nbsp;</span></div>
					<div class="stl_01" style="left:7.7711em;top:41.4356em;"><span class="stl_200 stl_171 stl_28">PROPERTIES: &nbsp;</span></div>
					<div class="stl_01" style="left:7.7711em;top:42.2856em;"><span class="stl_200 stl_171 stl_28">VOLATILITY: 0 &nbsp;</span></div>
					<div class="stl_01" style="left:7.7711em;top:43.1356em;"><span class="stl_200 stl_171 stl_28">DOCUMENTATION: NULL &nbsp;</span></div>
					<div class="stl_01" style="left:7.417em;top:43.9856em;"><span class="stl_200 stl_171 stl_28">1 row in set (0.01 sec) &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:45.1725em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0412em;">As we see, </span><span class="stl_170 stl_171 stl_28">ENABLE</span><span class="stl_170 stl_171 stl_278">D</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0412em;">is </span><span class="stl_170 stl_171 stl_28">NO</span><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0444em;">; this tells us that we are not currently instrumenting </span><span class="stl_170 stl_171 stl_28">SELECT &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:46.2225em;"><span class="stl_154 stl_32 stl_28">queries. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:47.8219em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">There are three options for enabling or disabling </span><span class="stl_170 stl_171 stl_28">performance_schem</span><span class="stl_170 stl_171 stl_186">a</span><span class="stl_154 stl_32 stl_39">instruments: &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">48 &nbsp;</span></div>
					<div class="stl_01" style="left:7.3618em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.2693em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 3: Performance Schema &nbsp;</span></div>
					<a name="70_0" style="position:absolute;left:0em;top:11.3636em;">&nbsp;</a>
					<a name="70_1" style="position:absolute;left:0em;top:25.8839em;">&nbsp;</a>
					<a name="70_2" style="position:absolute;left:0em;top:31.8669em;">&nbsp;</a>
					<a name="70_3" style="position:absolute;left:0em;top:33.7028em;">&nbsp;</a>
					<a name="70_4" style="position:absolute;left:0em;top:27.7693em;">&nbsp;</a>
					<a name="70_5" style="position:absolute;left:0em;top:18.9539em;">&nbsp;</a>
					<a name="70_6" style="position:absolute;left:0em;top:9.3447em;">&nbsp;</a>
					<a name="70_7" style="position:absolute;left:0em;top:34.8023em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>