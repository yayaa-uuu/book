<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_243.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_243.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:5.9998em;top:4.366em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0144em;">mizations are independent of values, such as the value of a constant in a </span><span class="stl_170 stl_171 stl_28">WHER</span><span class="stl_170 stl_171 stl_302">E</span><span class="stl_154 stl_32 stl_99">clause. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:5.416em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.0576em;">They can be performed once and will always be valid, even when the query is reexe‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:6.466em;z-index:438;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0018em;">cuted with different values. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_132" style="word-spacing:0.0065em;">u can think of these as “compile-time optimizations</span><span class="stl_154 stl_32 stl_161">.</span><span class="stl_154 stl_32 stl_161">” &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:8.0046em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0072em;">In contrast, </span><span class="stl_155 stl_41 stl_149" style="word-spacing:0.0184em;">dynamic optimizations </span><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0029em;">are based on context and can depend on many fac‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:9.1155em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0109em;">tors, such as which value is in a </span><span class="stl_170 stl_171 stl_28">WHER</span><span class="stl_170 stl_171 stl_335">E</span><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0142em;">clause or how many rows are in an index. They &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:10.1655em;z-index:621;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0527em;">must be reevaluated each time the query is executed. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0561em;">u can think of these as “run‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:11.2155em;z-index:663;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0024em;">time optimizations</span><span class="stl_154 stl_32 stl_161">.</span><span class="stl_154 stl_32 stl_161">” &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:12.7655em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.1853em;">The difference is important when executing prepared statements or stored proce‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:13.8155em;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0383em;">dures. MySQL can do static optimizations once, but it must reevaluate dynamic opti‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:14.8655em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.1664em;">mizations every time it executes a query. MySQL sometimes even reoptimizes the &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:15.9155em;"><span class="stl_154 stl_32 stl_247" style="word-spacing:-0.0036em;">query as it executes it.</span><sup style="top: -0.2917em;"><a href="MultiPageHTML_out229.html#229_0"><span class="stl_166 stl_32 stl_361" style="word-spacing:-0.0063em;">6 &nbsp;</span></a></sup></div>
					<div class="stl_01" style="left:6.0002em;top:17.4655em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.004em;">Here are some types of optimizations MySQL knows how to do: &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:19.0874em;"><span class="stl_155 stl_41 stl_82" style="word-spacing:0.0126em;">Reordering joins &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:20.1488em;z-index:957;"><span class="stl_154 stl_32 stl_127">T</span><span class="stl_154 stl_32 stl_28">a</span><span class="stl_154 stl_32 stl_43" style="word-spacing:0.0181em;">bles don’t always have to be joined in the order you specify in the query. Deter‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:21.1988em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0978em;">mining the best join order is an important optimization; we explain it in depth &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:22.2488em;z-index:1108;"><span class="stl_154 stl_32 stl_194" style="word-spacing:0.0135em;">later in this chapter. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:23.9202em;"><span class="stl_155 stl_41 stl_81" style="word-spacing:0.0116em;">Converting </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0em;">OUTER JOIN</span><span class="stl_155 stl_41 stl_201" style="word-spacing:0.02em;">s to </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0em;">INNER JOIN &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:25.031em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0644em;">An </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0645em;">OUTER JOIN </span><span class="stl_154 stl_32 stl_107" style="word-spacing:0.0733em;">doesn’t necessarily have to be executed as an </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0.0644em;">OUTER JOIN</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0644em;">. Some &nbsp;</span></div>
					<div class="stl_01" style="left:7.5003em;top:26.1304em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0958em;">factors, such as the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.1602em;">WHERE </span><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0983em;">clause and table schema, can actually cause an </span><span class="stl_170 stl_171 stl_28">OUTER &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:27.2299em;"><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.1722em;">JOIN </span><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0874em;">to be equivalent to an </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0.0844em;">INNER JOIN</span><span class="stl_154 stl_32 stl_46" style="word-spacing:0.087em;">. MySQL can recognize this and rewrite &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:28.2799em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">the join, which makes it eligible for reordering. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:29.9018em;"><span class="stl_155 stl_41 stl_19" style="word-spacing:0.0157em;">Applying algebraic equivalence rules &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:30.9632em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.175em;">MySQL applies algebraic transformations to simplify and canonicalize expres‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:32.0132em;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.1337em;">sions. It can also fold and reduce constants, eliminating impossible constraints &nbsp;</span></div>
					<div class="stl_01" style="left:7.5003em;top:33.1127em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.1353em;">and constant conditions. For example, the term </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0.0472em;">(5=5 AND a&gt;5) </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1319em;">will reduce to &nbsp;</span></div>
					<div class="stl_01" style="left:7.4998em;top:34.2121em;z-index:1625;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1477em;">just </span><span class="stl_170 stl_171 stl_28">a&gt;5</span><span class="stl_154 stl_32 stl_44" style="word-spacing:0.1639em;">. Similarly, </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0.097em;">(a&lt;b AND b=c) AND a=5 </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1476em;">becomes </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0.1477em;">b&gt;5 AND b=c AND a=5</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1403em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:35.2621em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.0126em;">These rules are very useful for writing conditional queries, which we discuss later &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:36.3121em;z-index:1750;"><span class="stl_154 stl_32 stl_98" style="word-spacing:0.0149em;">in this chapter. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:37.9835em;"><span class="stl_170 stl_171 stl_28">COUNT()</span><span class="stl_155 stl_41 stl_28" style="word-spacing:0em;">, </span><span class="stl_170 stl_171 stl_28">MIN()</span><span class="stl_155 stl_41 stl_22" style="word-spacing:0.023em;">, and </span><span class="stl_170 stl_171 stl_28">MAX(</span><span class="stl_170 stl_171 stl_259">)</span><span class="stl_155 stl_41 stl_230">optimizations &nbsp;</span></div>
					<div class="stl_01" style="left:7.4999em;top:39.0449em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.2685em;">Indexes and column nullability can often help MySQL optimize away these &nbsp;</span></div>
					<div class="stl_01" style="left:7.5003em;top:40.0949em;z-index:1905;"><span class="stl_154 stl_32 stl_72" style="word-spacing:0.046em;">expressions. For example, to find the minimum value of a column that</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0415em;">s </span><span class="stl_154 stl_32 stl_28">l</span><span class="stl_154 stl_32 stl_28">eftmost &nbsp;</span></div>
					<div class="stl_01" style="left:7.4998em;top:41.1449em;"><span class="stl_154 stl_32 stl_97" style="word-spacing:0.066em;">in a B-tree index, MySQL can just request the first row in the index. It can even &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:42.1949em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0849em;">do this in the query optimization stage and treat the value as a constant for the &nbsp;</span></div>
					<div class="stl_01" style="left:6.095em;top:46.4883em;"><span class="stl_167 stl_32 stl_28">6</span></div>
					<div class="stl_01" style="left:6.6667em;top:46.4058em;z-index:74;"><span class="stl_168 stl_32 stl_53" style="word-spacing:0.0011em;">For example, the range check query plan reevaluates indexes for each row in a </span><span class="stl_211 stl_171 stl_28">JOIN</span><span class="stl_168 stl_32 stl_28" style="word-spacing:0em;">. </span><span class="stl_168 stl_32 stl_109">Y</span><span class="stl_168 stl_32 stl_28">o</span><span class="stl_168 stl_32 stl_300" style="word-spacing:-0.0053em;">u can see this query &nbsp;</span></div>
					<div class="stl_01" style="left:6.6667em;top:47.2968em;"><span class="stl_168 stl_32 stl_97" style="word-spacing:0.0031em;">plan by looking for “range checked for each record” in the </span><span class="stl_211 stl_171 stl_28">Extr</span><span class="stl_211 stl_171 stl_186">a</span><span class="stl_168 stl_32 stl_28" style="word-spacing:0em;">column in </span><span class="stl_211 stl_171 stl_28">EXPLAIN</span><span class="stl_168 stl_32 stl_146" style="word-spacing:-0.0045em;">. This query plan also &nbsp;</span></div>
					<div class="stl_01" style="left:6.6667em;top:48.1878em;"><span class="stl_168 stl_32 stl_39" style="word-spacing:0.0035em;">increments the </span><span class="stl_211 stl_171 stl_28">Select_full_range_joi</span><span class="stl_211 stl_171 stl_186">n</span><span class="stl_168 stl_32 stl_146" style="word-spacing:-0.0045em;">server variable. &nbsp;</span></div>
					<div class="stl_01" style="left:27.8409em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Query Execution Basics &nbsp;</span></div>
					<div class="stl_01" style="left:34.1747em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:35.0822em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">207 &nbsp;</span></div>
					<a name="229_0" style="position:absolute;left:0em;top:46.4395em;">&nbsp;</a>
					<a name="229_1" style="position:absolute;left:0em;top:31.1925em;">&nbsp;</a>
					<a name="229_2" style="position:absolute;left:0em;top:39.2741em;">&nbsp;</a>
					<a name="229_3" style="position:absolute;left:0em;top:25.2603em;">&nbsp;</a>
					<a name="229_4" style="position:absolute;left:0em;top:20.378em;">&nbsp;</a>
					<a name="229_5" style="position:absolute;left:0em;top:17.6947em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>