<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_136.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_136.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.3166em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.1526em;">command such as the one we just showed. Other helpful tools that can provide a &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:5.3552em;z-index:120;"><span class="stl_154 stl_32 stl_143" style="word-spacing:0.0652em;">compact display of status counter changes are Percona </span><span class="stl_154 stl_32 stl_105">T</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_357" style="word-spacing:0.1003em;">olkit’s </span><span class="stl_155 stl_41 stl_99" style="word-spacing:0.0639em;">pt-mext </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0596em;">or </span><span class="stl_155 stl_41 stl_115">pt-mysql- &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:6.4052em;"><span class="stl_155 stl_41 stl_111">summary</span><span class="stl_154 stl_32 stl_111">. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:7.9666em;"><span class="stl_154 stl_32 stl_132" style="word-spacing:0.0361em;">Now that we’ve shown you the preliminaries, we’ll take you on a guided tour of some &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:9.0166em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0015em;">server internals, interleaved with advice on configuration. This will give you the back‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:10.0666em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0923em;">ground you’ll need to choose appropriate values for configuration options when we &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:11.1166em;z-index:400;"><span class="stl_154 stl_32 stl_43" style="word-spacing:0.0073em;">return to the sample configuration file later. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:13.0131em;"><span class="stl_160 stl_27 stl_28" style="word-spacing:-0.092em;">Conﬁguring </span><span class="stl_159 stl_27 stl_28" style="word-spacing:0em;">Memory Usage &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:15.3327em;"><span class="stl_154 stl_32 stl_358" style="word-spacing:0.2458em;">Using </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0302em;">innodb_dedicated_server </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.2193em;">will typically use 50%–75% of your RAM. This &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:16.3827em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0063em;">leaves you with at least 25% for per-connection memory allocations, operating system &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:17.4327em;z-index:593;"><span class="stl_154 stl_32 stl_134" style="word-spacing:0.0439em;">overhead, and other memory settings. </span><span class="stl_154 stl_32 stl_52">W</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0461em;">e </span><span class="stl_154 stl_32 stl_28">g</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0461em;">o over each of these in the following sec‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:18.4827em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.3615em;">tions, and then we take &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:19.5327em;"><span class="stl_154 stl_32 stl_77">requirements. &nbsp;</span></div>
					<div class="stl_01" style="left:15.8587em;top:18.4827em;"><span class="stl_154 stl_32 stl_71" style="word-spacing:0.3673em;">a more detailed look at the various MySQL caches’ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0006em;top:21.417em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Per-Connection Memory Needs &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:23.3168em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0188em;">MySQL needs a small amount of memory just to hold a connection (typically with an &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:24.3668em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0612em;">associated dedicated thread) open. It also requires a base amount of memory to exe‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:25.4168em;z-index:883;"><span class="stl_154 stl_32 stl_85" style="word-spacing:0.059em;">cute any given query. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_158" style="word-spacing:0.05em;">u’ll need to set aside enough memory for MySQL to execute &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:26.4668em;z-index:1001;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.0569em;">queries during peak load times. Otherwise, your queries will be starved for memory, &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:27.5168em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">and they will run poorly or fail. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:29.0668em;"><span class="stl_154 stl_32 stl_138" style="word-spacing:0.0688em;">It’s useful to know how much memory MySQL will consume during peak usage, but &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:30.1168em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.1053em;">some usage patterns can unexpectedly consume a lot of memory, which makes this &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:31.1668em;"><span class="stl_154 stl_32 stl_72" style="word-spacing:0.059em;">hard to predict. Prepared statements are one example because you can have many of &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:32.2168em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.0336em;">them open at once. Another example is the InnoDB data dictionary (more about this &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:33.2668em;"><span class="stl_154 stl_32 stl_99">later). &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:34.8168em;z-index:1303;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0366em;">u don’t need to assume a worst-case scenario when trying to predict peak memory &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:35.8668em;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.0096em;">consumption. For example, if you configure MySQL to allow a maximum of one hun‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:36.9168em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.028em;">dred connections, it theoretically might be possible to simultaneously run large quer‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:37.9668em;"><span class="stl_154 stl_32 stl_123" style="word-spacing:0.0052em;">ies on all one hundred connections, but in reality this probably won’t happen. Queries &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:39.0168em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.1835em;">that use many large temporary tables or complex stored procedures are the most &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:40.0668em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0015em;">likely causes of high per-connection memory consumption. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:41.9511em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Reserving Memory for the Operating System &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:43.8509em;"><span class="stl_154 stl_32 stl_117" style="word-spacing:0.0344em;">Just as with queries, you need to reserve enough memory for the operating system to &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:44.9009em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0021em;">do its work. This involves running any local monitoring software, configuration man‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:45.9509em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.0538em;">agement tooling, scheduled jobs, and so forth. The best indication that the operating &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:47.0009em;z-index:1981;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0119em;">system has enough memory is that it</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0104em;">s </span><span class="stl_154 stl_32 stl_28">n</span><span class="stl_154 stl_32 stl_126" style="word-spacing:0.0098em;">ot actively swapping (paging) virtual memory &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:48.0509em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">to disk. &nbsp;</span></div>
					<div class="stl_01" style="left:26.7375em;top:50.8098em;"><span class="stl_233 stl_27 stl_28" style="word-spacing:-0.092em;">Conﬁguring </span><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Memory Usage &nbsp;</span></div>
					<div class="stl_01" style="left:34.1745em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:35.082em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">109 &nbsp;</span></div>
					<a name="131_0" style="position:absolute;left:0em;top:13.3647em;">&nbsp;</a>
					<a name="131_1" style="position:absolute;left:0em;top:21.7101em;">&nbsp;</a>
					<a name="131_2" style="position:absolute;left:0em;top:42.2442em;">&nbsp;</a>
					<a name="131_3" style="position:absolute;left:0em;top:15.562em;">&nbsp;</a>
					<a name="131_4" style="position:absolute;left:0em;top:5.5958em;">&nbsp;</a>
					<a name="131_5" style="position:absolute;left:0em;top:11.3458em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>