<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_374.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_374.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.2435em;"><span class="stl_193 stl_27 stl_28" style="word-spacing:0em;">SSD versus HDD &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:5.7109em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.1338em;">By and large, you’ll want to use SSDs for everything—especially your MySQL data &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:6.7609em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.044em;">volume. If you find yourself particularly tight on budget, you can explore HDDs as a &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:7.8109em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0301em;">cheaper option for the boot disk. In our experimentation, we found that an SSD boo‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:8.8609em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0129em;">ted two to three times faster than an HDD. If the boot time matters, particularly in an &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:9.9109em;z-index:335;"><span class="stl_154 stl_32 stl_222" style="word-spacing:0.0069em;">outage or reboot scenario, stick with SSD all the way. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:11.9678em;"><span class="stl_193 stl_27 stl_28" style="word-spacing:0em;">IOPS and throughput &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:13.4353em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0417em;">Another complicated factor is determining your IOPS and throughput requirements. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:14.4853em;z-index:425;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_122" style="word-spacing:0.0128em;">u should have a good understanding, both historical and forward looking, for what &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:15.5353em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0014em;">each of these requirements looks like before choosing what kind of disk you need. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:17.0853em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.1274em;">If you are migrating from an existing workload, ideally you already have historical &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:18.1353em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0231em;">disk-use metrics for these that will allow you to best choose your disk. If not, you can &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:19.1739em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1795em;">use </span><a href="https://oreil.ly/GRdGx" target="_blank"><span class="stl_163 stl_41 stl_82">pt-diskstats</span></a><span class="stl_154 stl_32 stl_71" style="word-spacing:0.1853em;">, from the Percona </span><span class="stl_154 stl_32 stl_105">T</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_53" style="word-spacing:0.1808em;">olkit package, to collect metrics for a day to &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:20.2353em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">measure peaks. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:21.7853em;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.009em;">For new databases, invest some time to see how intensive the application will be. Even &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:22.8353em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0221em;">something as basic as understanding your read-to-write ratio can help. If all else fails, &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:23.8853em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.1385em;">find a good middle ground between performance and cost, and set an expectation &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:24.9353em;z-index:1030;"><span class="stl_154 stl_32 stl_152" style="word-spacing:0.0113em;">that you may need to adjust later. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9995em;top:26.8196em;"><span class="stl_180 stl_27 stl_87" style="word-spacing:0.0005em;">Additional Tips &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:28.7193em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0263em;">If you choose to run your own MySQL on VM, you will be responsible for a lot more &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:29.7693em;z-index:1130;"><span class="stl_154 stl_32 stl_247" style="word-spacing:0.1439em;">than a managed service. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_87" style="word-spacing:0.1479em;">u’ll need to do things like disk sizing, backups, and so &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:30.8193em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0012em;">forth on your own. Here are a few tips to consider if you go this route. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:32.8763em;"><span class="stl_193 stl_27 stl_28" style="word-spacing:0em;">Dealing with host reboots &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:34.3437em;z-index:1295;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0376em;">ur VM is really just running on someone else</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0334em;">s </span><span class="stl_154 stl_32 stl_28">h</span><span class="stl_154 stl_32 stl_214" style="word-spacing:0.0469em;">ardware. As much as we don’t like &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:35.3937em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0071em;">it, hardware can and does fail, and when that happens, your VM will immediately ter‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:36.4437em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0798em;">minate. If configured, your VM will then begin booting back up on another host. If &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:37.4937em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.1494em;">this happens while you are serving production traffic, especially on a source node &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:38.5437em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">taking writes, it can be a disruption to your users. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:40.0937em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0685em;">There are no magic solutions that will let you avoid this—you just have to deal with &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:41.1437em;z-index:1648;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0303em;">it. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0324em;">u tend to have two options if this happens: initiate a failover process to a replica &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:42.1937em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.003em;">(covered in </span><a href="MultiPageHTML_out261.html#261_0"><span class="stl_184 stl_32 stl_77" style="word-spacing:0.0063em;">“Replication Failover” on page 239 </span></a><span class="stl_154 stl_32 stl_28" style="word-spacing:0.003em;">in </span><a href="MultiPageHTML_out249.html#249_0"><span class="stl_184 stl_32 stl_84" style="word-spacing:0.0046em;">Chapter 9</span></a><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">), or wait for the source to &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:43.2437em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.163em;">come back online. Dealing with an unplanned promotion can be very tricky. Our &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:44.2937em;"><span class="stl_154 stl_32 stl_87" style="word-spacing:0.0259em;">advice is to just allow the server to come back online and replication to reattach itself &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:45.3437em;z-index:1938;"><span class="stl_154 stl_32 stl_202">naturally. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">322 &nbsp;</span></div>
					<div class="stl_01" style="left:7.6677em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.5752em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 12: MySQL in the Cloud &nbsp;</span></div>
					<a name="344_0" style="position:absolute;left:0em;top:27.1126em;">&nbsp;</a>
					<a name="344_1" style="position:absolute;left:0em;top:34.5729em;">&nbsp;</a>
					<a name="344_2" style="position:absolute;left:0em;top:5.9402em;">&nbsp;</a>
					<a name="344_3" style="position:absolute;left:0em;top:13.6645em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>