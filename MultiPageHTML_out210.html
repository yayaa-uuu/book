<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_223.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_223.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.3166em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.1883em;">This command gives quite a lot of index information, which the MySQL manual &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:5.416em;z-index:83;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1694em;">explains in detail. </span><span class="stl_154 stl_32 stl_52">W</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1694em;">e </span><span class="stl_154 stl_32 stl_28">d</span><span class="stl_154 stl_32 stl_24" style="word-spacing:0.1749em;">o want to call your attention to the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0827em;">Cardinality </span><span class="stl_154 stl_32 stl_28">column, &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:6.466em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0532em;">though. This shows how many distinct values the storage engine estimates are in the &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:7.5655em;z-index:209;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.146em;">index. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.1481em;">u can also get this data from the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.1074em;">INFORMATION_SCHEMA.STATISTICS </span><span class="stl_154 stl_32 stl_28">table. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:8.6649em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.1454em;">For example, you can write queries against the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.1106em;">INFORMATION_SCHEMA </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.143em;">tables to find &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:9.7149em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0569em;">indexes with very low selectivity. Beware, however, that on servers with a lot of data, &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:10.7649em;z-index:461;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0039em;">these metadata tables can cause a lot of load on the server. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:12.3149em;"><span class="stl_154 stl_32 stl_99" style="word-spacing:0.0134em;">InnoDB’s statistics are worth exploring more. The statistics are generated by sampling &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:13.3649em;z-index:606;"><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0056em;">a few random pages in the index and assuming that the rest of the index looks similar. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:14.4643em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.1643em;">The number of pages sampled is controlled with the </span><span class="stl_170 stl_171 stl_28">innodb_stats_sample_pages &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:15.5143em;"><span class="stl_154 stl_32 stl_87" style="word-spacing:0.0122em;">variable. Setting this to a value larger than the default of 8 can in theory help generate &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:16.5643em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0687em;">more representative index statistics, especially on very large tables, but your mileage &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:17.6143em;z-index:831;"><span class="stl_154 stl_32 stl_422" style="word-spacing:0.0207em;">may vary. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:19.1643em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.1008em;">InnoDB calculates statistics for indexes when tables are first opened, when you run &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:20.2638em;z-index:957;"><span class="stl_170 stl_171 stl_28" style="word-spacing:0em;">ANALYZE TABLE</span><span class="stl_154 stl_32 stl_65" style="word-spacing:0.014em;">, and when the table’s size changes significantly. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:21.8632em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0093em;">InnoDB also calculates statistics for queries against some </span><span class="stl_170 stl_171 stl_28">INFORMATION_SCHEM</span><span class="stl_170 stl_171 stl_408">A</span><span class="stl_154 stl_32 stl_28">tables, &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:22.9627em;"><span class="stl_170 stl_171 stl_28" style="word-spacing:0.0093em;">SHOW TABLE STATUS </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0946em;">and </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0334em;">SHOW INDEX </span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0968em;">queries, and when the MySQL command-line &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:24.0127em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.009em;">client has autocompletion enabled. This can actually become a pretty serious problem &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:25.0627em;"><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0312em;">on large servers with lots of data or when I/O is slow. Client programs or monitoring &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:26.1127em;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.086em;">tools that cause sampling to occur can create a lot of locking and heavy load on the &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:27.1627em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.1219em;">server as well as frustrate users with slow startup times. And you can’t observe the &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:28.2621em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0513em;">index statistics without changing them because </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0.0491em;">SHOW INDE</span><span class="stl_170 stl_171 stl_437">X</span><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0529em;">will update the statistics. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:29.3615em;z-index:1452;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.4126em;">u can disable the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:0.1732em;">innodb_stats_on_metadata </span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.4147em;">option to avoid all of these &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:30.4115em;"><span class="stl_154 stl_32 stl_28">problems. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0006em;top:32.2958em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Reducing Index and Data Fragmentation &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:34.1956em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0608em;">B-tree indexes can become fragmented, which might reduce performance. Fragmen‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:35.2456em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0009em;">ted indexes can be poorly filled and/or nonsequential on disk. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:36.7956em;"><span class="stl_154 stl_32 stl_114" style="word-spacing:0.0578em;">By design, B-tree indexes require random disk accesses to “dive” to the leaf pages, so &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:37.8456em;"><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0126em;">random access is the rule, not the exception. However, the leaf pages can still perform &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:38.8956em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0425em;">better if they are physically sequential and tightly packed. If they are not, we say they &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:39.9342em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0356em;">are </span><span class="stl_155 stl_41 stl_96">fragmented</span><span class="stl_154 stl_32 stl_54" style="word-spacing:0.0397em;">, and range scans or full index scans can be many times slower. This is &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:40.9956em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">especially true for index-covered queries. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:42.5456em;"><span class="stl_154 stl_32 stl_151" style="word-spacing:0.0341em;">The table’s data storage can also become fragmented. However, data storage fragmen‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:43.5956em;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.237em;">tation is more complex than index fragmentation. There are three types of data &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:44.6456em;"><span class="stl_154 stl_32 stl_71">fragmentation: &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">188 &nbsp;</span></div>
					<div class="stl_01" style="left:7.6682em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.5757em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 7: Indexing for High Performance &nbsp;</span></div>
					<a name="210_0" style="position:absolute;left:0em;top:32.5889em;">&nbsp;</a>
					<a name="210_1" style="position:absolute;left:0em;top:34.4249em;">&nbsp;</a>
					<a name="210_2" style="position:absolute;left:0em;top:41.2249em;">&nbsp;</a>
					<a name="210_3" style="position:absolute;left:0em;top:8.8941em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>