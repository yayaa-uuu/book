<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_104.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_104.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.3166em;"><span class="stl_154 stl_32 stl_88" style="word-spacing:0.1302em;">Memory exhaustion can still happen but usually only when you try to allocate too &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:5.3666em;z-index:88;"><span class="stl_154 stl_32 stl_77" style="word-spacing:0.1282em;">much memory to MySQL. </span><span class="stl_154 stl_32 stl_52">W</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1251em;">e </span><span class="stl_154 stl_32 stl_28">t</span><span class="stl_154 stl_32 stl_73" style="word-spacing:0.1271em;">alk about optimal configuration settings to prevent &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:6.4166em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">this in </span><a href="MultiPageHTML_out131.html#131_0"><span class="stl_184 stl_32 stl_145" style="word-spacing:0.0107em;">“Configuring Memory Usage” on page 109 </span></a><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">in </span><a href="MultiPageHTML_out121.html#121_0"><span class="stl_184 stl_32 stl_24" style="word-spacing:0.0054em;">Chapter 5</span></a><span class="stl_154 stl_32 stl_24" style="word-spacing:0.0054em;">. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:8.3131em;"><span class="stl_159 stl_27 stl_28" style="word-spacing:0em;">How to Select CPUs for MySQL &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:10.5833em;z-index:209;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0571em;">u should consider whether your workload is CPU bound when upgrading current &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:11.6333em;z-index:307;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0699em;">hardware or purchasing new hardware. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_122" style="word-spacing:0.07em;">u can identify a CPU-bound workload by &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:12.6833em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.075em;">checking the CPU utilization, but instead of looking only at how heavily your CPUs &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:13.7333em;"><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0153em;">are loaded overall, look at the balance of CPU usage and I/O for your most important &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:14.7833em;z-index:524;"><span class="stl_154 stl_32 stl_132" style="word-spacing:0.0066em;">queries, and notice whether the CPUs are loaded evenly. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:16.3333em;"><span class="stl_154 stl_32 stl_185" style="word-spacing:-0.0019em;">Broadly speaking, you have two goals for your server: &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:17.9552em;"><span class="stl_155 stl_41 stl_144" style="word-spacing:0.0121em;">Low latency (fast response time) &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:19.0166em;"><span class="stl_154 stl_32 stl_105" style="word-spacing:0.3397em;">To </span><span class="stl_154 stl_32 stl_28">a</span><span class="stl_154 stl_32 stl_95" style="word-spacing:0.1455em;">chieve this, you need fast CPUs because each query will use only a single &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:20.0666em;z-index:664;"><span class="stl_154 stl_32 stl_323">CPU. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:21.6886em;"><span class="stl_155 stl_41 stl_221" style="word-spacing:0.0257em;">High throughput &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:22.75em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.087em;">If you can run many queries at the same time, you might benefit from multiple &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:23.8em;"><span class="stl_154 stl_32 stl_46" style="word-spacing:0.0025em;">CPUs to service the queries. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:25.35em;"><span class="stl_154 stl_32 stl_183" style="word-spacing:0.0352em;">If your workload doesn’t utilize all of your CPUs, MySQL can still use the extra CPUs &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:26.4em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.1356em;">for background tasks such as purging InnoDB buffers, network operations, and so &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:27.45em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0042em;">on. However, these jobs are usually minor compared to executing queries. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:29.3465em;"><span class="stl_159 stl_27 stl_28" style="word-spacing:0em;">Balancing Memory and Disk Resources &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:31.6167em;"><span class="stl_154 stl_32 stl_143" style="word-spacing:0.0487em;">The main reason to have a lot of memory isn’t so you can hold a lot of data in mem‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:32.6667em;z-index:1068;"><span class="stl_154 stl_32 stl_324" style="word-spacing:0.1126em;">ory: it</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1258em;">s </span><span class="stl_154 stl_32 stl_28">u</span><span class="stl_154 stl_32 stl_77" style="word-spacing:0.129em;">ltimately so you can avoid disk I/O, which is orders of magnitude slower &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:33.7167em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.1415em;">than accessing data in memory. The trick is to balance the memory and disk size, &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:34.7667em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">speed, cost, and other qualities so you get good performance for your workload. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9994em;top:36.651em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Caching, Reads, and Writes &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:38.5507em;z-index:1355;"><span class="stl_154 stl_32 stl_120" style="word-spacing:0.0225em;">If you have enough memory, you can insulate the disk from read requests completely. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:39.6007em;z-index:1420;"><span class="stl_154 stl_32 stl_122" style="word-spacing:0.0473em;">If all your data fits in memory, every read will be a cache hit once the server</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0471em;">s </span><span class="stl_154 stl_32 stl_28">c</span><span class="stl_154 stl_32 stl_28">aches &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:40.6507em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0862em;">are warmed up. There will still be logical reads from memory but no physical reads &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:41.7007em;"><span class="stl_154 stl_32 stl_124" style="word-spacing:0.0769em;">from disk. Writes are a different matter, though. A write can be performed in mem‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:42.7507em;z-index:1627;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0201em;">ory just as a read can, but sooner or later it has to be written to the disk so it</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0193em;">s </span><span class="stl_154 stl_32 stl_28">p</span><span class="stl_154 stl_32 stl_28">erma‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:43.8007em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0271em;">nent. In other words, a cache can delay writes, but caching cannot eliminate writes as &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:44.8507em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">it can for reads. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:46.4007em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.0917em;">In fact, in addition to allowing writes to be delayed, caching can permit them to be &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:47.4507em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.004em;">grouped together in two important ways: &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">76 &nbsp;</span></div>
					<div class="stl_01" style="left:7.3621em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.2696em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 4: Operating System and Hardware Optimization &nbsp;</span></div>
					<a name="98_0" style="position:absolute;left:0em;top:8.6647em;">&nbsp;</a>
					<a name="98_1" style="position:absolute;left:0em;top:29.6981em;">&nbsp;</a>
					<a name="98_2" style="position:absolute;left:0em;top:36.944em;">&nbsp;</a>
					<a name="98_3" style="position:absolute;left:0em;top:38.78em;">&nbsp;</a>
					<a name="98_4" style="position:absolute;left:0em;top:10.8125em;">&nbsp;</a>
					<a name="98_5" style="position:absolute;left:0em;top:31.8459em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>