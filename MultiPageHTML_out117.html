<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_123.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_123.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:5.9996em;top:4.5415em;"><span class="stl_170 stl_171 stl_117">%util</span><sup style="top: -0.2917em;"><a href="MultiPageHTML_out117.html#117_1"><span class="stl_343 stl_41 stl_117">4 &nbsp;</span></a></sup></div>
					<div class="stl_01" style="left:7.5001em;top:5.416em;"><span class="stl_154 stl_32 stl_87" style="word-spacing:0.0406em;">The percentage of time during which at least one request was active. This is very &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:6.4546em;"><span class="stl_154 stl_32 stl_84" style="word-spacing:0.1622em;">confusingly named. It is </span><span class="stl_155 stl_41 stl_121" style="word-spacing:0.1746em;">not </span><span class="stl_154 stl_32 stl_96" style="word-spacing:0.1708em;">the device’s utilization, if you’re familiar with the &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:7.5046em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0152em;">standard definition of </span><span class="stl_155 stl_41 stl_56" style="word-spacing:0.0296em;">utilization </span><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0182em;">in queuing theory. A device with more than one &nbsp;</span></div>
					<div class="stl_01" style="left:7.5002em;top:8.566em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0889em;">hard drive (such as a RAID controller) should be able to support a higher con‐ &nbsp;</span></div>
					<div class="stl_01" style="left:7.4997em;top:9.6655em;z-index:400;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1888em;">currency than 1, but </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0623em;">%util </span><span class="stl_154 stl_32 stl_84" style="word-spacing:0.1934em;">will never exceed 100% unless there</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1888em;">s a </span><span class="stl_154 stl_32 stl_28">r</span><span class="stl_154 stl_32 stl_28">ounding &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:10.7041em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.1026em;">error in the math used to compute it. As a result, it is </span><span class="stl_155 stl_41 stl_121" style="word-spacing:0.1171em;">not </span><span class="stl_154 stl_32 stl_97" style="word-spacing:0.1031em;">a good indication of &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:11.7655em;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.049em;">device saturation, contrary to what the documentation says, except in the special &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:12.8155em;"><span class="stl_154 stl_32 stl_120" style="word-spacing:0.0062em;">case where you’re looking at a single physical hard drive. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:14.3655em;z-index:643;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0811em;">u can use the output to deduce some facts about a machine</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0778em;">s </span><span class="stl_154 stl_32 stl_28">I</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0778em;">/O subsystem. One &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:15.4155em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.1347em;">important metric is the number of requests served concurrently. Because the reads &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:16.4655em;z-index:769;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0527em;">and writes are per second and the service time</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0508em;">s </span><span class="stl_154 stl_32 stl_28">u</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0508em;">nit is thousandths of a second, you &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:17.5155em;"><span class="stl_154 stl_32 stl_115" style="word-spacing:0.1854em;">can use Little’s law to derive the following formula for the number of concurrent &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:18.5655em;"><span class="stl_154 stl_32 stl_178" style="word-spacing:-0.0026em;">requests the device is serving: &nbsp;</span></div>
					<div class="stl_01" style="left:7.4168em;top:20.328em;"><span class="stl_200 stl_171 stl_28">concurrency = (r/s + w/s) * (svctm/1000) &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:21.4655em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.1165em;">Plugging the preceding sample numbers into the concurrency formula gives a con‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:22.5155em;"><span class="stl_154 stl_32 stl_122" style="word-spacing:0.0272em;">currency of about 0.995. This means that on average, the device was serving less than &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:23.5655em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0016em;">one request at a time during the sampling interval. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:25.4498em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Other Helpful Tools &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:27.3382em;"><span class="stl_154 stl_32 stl_344" style="word-spacing:0.0947em;">We’ve shown </span><span class="stl_155 stl_41 stl_81" style="word-spacing:0.0576em;">vmstat </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.048em;">and </span><span class="stl_155 stl_41 stl_248" style="word-spacing:0.0668em;">iostat </span><span class="stl_154 stl_32 stl_99" style="word-spacing:0.0544em;">because they’re widely available, and </span><span class="stl_155 stl_41 stl_81" style="word-spacing:0.0576em;">vmstat </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.048em;">is usually &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:28.3996em;"><span class="stl_154 stl_32 stl_222" style="word-spacing:0.1849em;">installed by default on many Unix-like operating systems. However, each of these &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:29.4496em;"><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0874em;">tools has its limitations, such as confusing units of measurement, sampling at inter‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:30.4996em;"><span class="stl_154 stl_32 stl_99" style="word-spacing:0.0111em;">vals that don’t correspond to when the operating system updates the statistics, and the &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:31.5496em;"><span class="stl_154 stl_32 stl_114" style="word-spacing:0.1273em;">inability to see all of the metrics at once. If these tools don’t meet your needs, you &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:32.5882em;"><span class="stl_154 stl_32 stl_114" style="word-spacing:0.0051em;">might be interested in </span><a href="http://dag.wieers.com/home-made/dstat" target="_blank"><span class="stl_163 stl_41 stl_121" style="word-spacing:0.017em;">dstat </span></a><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">or </span><a href="https://oreil.ly/DSvmM" target="_blank"><span class="stl_163 stl_41 stl_108">collectl</span></a><span class="stl_154 stl_32 stl_108">. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:34.1382em;z-index:1523;"><span class="stl_154 stl_32 stl_52" style="word-spacing:0.2706em;">We </span><span class="stl_154 stl_32 stl_28">a</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0766em;">lso like to use </span><span class="stl_155 stl_41 stl_221" style="word-spacing:0.1002em;">mpstat </span><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0797em;">to watch CPU statistics; it provides a much better idea of &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:35.1996em;z-index:1657;"><span class="stl_154 stl_32 stl_55" style="word-spacing:0.2603em;">how the CPUs are behaving individually, instead of grouping them all together. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:36.2496em;z-index:1716;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0503em;">Sometimes this is very important when you’re diagnosing a problem. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_24" style="word-spacing:0.052em;">u might find &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:37.2882em;"><span class="stl_155 stl_41 stl_147" style="word-spacing:0.0163em;">blktrace </span><span class="stl_154 stl_32 stl_71" style="word-spacing:0.0058em;">to be helpful when you’re examining disk I/O usage, too. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:38.8382em;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.1172em;">Percona wrote its own replacement for </span><span class="stl_155 stl_41 stl_248" style="word-spacing:0.1321em;">iostat </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1133em;">called </span><span class="stl_155 stl_41 stl_82">pt-diskstats</span><span class="stl_154 stl_32 stl_345" style="word-spacing:0.143em;">. It’s part of Percona &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:39.8882em;"><span class="stl_154 stl_32 stl_105">T</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_84" style="word-spacing:0.0731em;">olkit. It addresses some of the complaints about </span><span class="stl_155 stl_41 stl_86">iostat</span><span class="stl_154 stl_32 stl_84" style="word-spacing:0.0731em;">, such as the way it presents &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:40.9496em;"><span class="stl_154 stl_32 stl_24" style="word-spacing:0.1632em;">reads and writes in aggregate and the lack of visibility into concurrency. It is also &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:41.9996em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.1111em;">interactive and keystroke driven, so you can zoom in and out, change the aggrega‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:43.0496em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0029em;">tion, filter out devices, and show and hide columns. It is a great way to slice and dice a &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:44.0996em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0845em;">sample of disk statistics, which you can gather with a simple shell script even if you &nbsp;</span></div>
					<div class="stl_01" style="left:6.095em;top:48.2703em;"><span class="stl_167 stl_32 stl_28">4</span></div>
					<div class="stl_01" style="left:6.6667em;top:48.1878em;"><span class="stl_168 stl_32 stl_114" style="word-spacing:0.0049em;">Software RAID, like MD/RAID, may not show utilization for the RAID array itself. &nbsp;</span></div>
					<div class="stl_01" style="left:28.3142em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Choosing a Filesystem &nbsp;</span></div>
					<div class="stl_01" style="left:34.4807em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:35.3882em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">95 &nbsp;</span></div>
					<a name="117_0" style="position:absolute;left:0em;top:25.7428em;">&nbsp;</a>
					<a name="117_1" style="position:absolute;left:0em;top:48.2792em;">&nbsp;</a>
					<a name="117_2" style="position:absolute;left:0em;top:36.4788em;">&nbsp;</a>
					<a name="117_3" style="position:absolute;left:0em;top:27.5788em;">&nbsp;</a>
					<a name="117_4" style="position:absolute;left:0em;top:23.7947em;">&nbsp;</a>
					<a name="117_5" style="position:absolute;left:0em;top:34.3788em;">&nbsp;</a>
					<a name="117_6" style="position:absolute;left:0em;top:39.0788em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>