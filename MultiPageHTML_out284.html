<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_309.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_309.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.3166em;z-index:10;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0781em;">caches. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_132" style="word-spacing:0.0847em;">u don’t need to worry about your data being modified while you’re trying &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:5.3666em;"><span class="stl_154 stl_32 stl_132" style="word-spacing:0.1038em;">to back it up, and because the server isn’t under load from the application, you can &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:6.4166em;z-index:164;"><span class="stl_154 stl_32 stl_43" style="word-spacing:0.0073em;">make the backup more quickly. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:7.9666em;"><span class="stl_154 stl_32 stl_35" style="word-spacing:0.1189em;">However, taking a server offline is more expensive than it might seem. As a result, &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:9.0166em;"><span class="stl_154 stl_32 stl_114" style="word-spacing:0.0131em;">you’ll almost certainly need to design your backups so that they don’t require the pro‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:10.0666em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.2056em;">duction server to be taken offline. Depending on your consistency requirements, &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:11.1166em;"><span class="stl_154 stl_32 stl_37" style="word-spacing:0.0956em;">though, making a backup while the server is online can still mean interrupting ser‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:12.1666em;z-index:463;"><span class="stl_154 stl_32 stl_152" style="word-spacing:0.0115em;">vice significantly. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:13.7166em;"><span class="stl_154 stl_32 stl_72" style="word-spacing:0.3937em;">Here are some performance-related factors to consider when you’re planning &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:14.7666em;"><span class="stl_154 stl_32 stl_28">backups: &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:16.3885em;"><span class="stl_155 stl_41 stl_190" style="word-spacing:0.018em;">Backup time &nbsp;</span></div>
					<div class="stl_01" style="left:7.4998em;top:17.4499em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.3398em;">How long does it take to make the backup and copy the backup to the &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:18.4999em;"><span class="stl_154 stl_32 stl_39">destination? &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:20.1219em;"><span class="stl_155 stl_41 stl_101" style="word-spacing:0.0145em;">Backup load &nbsp;</span></div>
					<div class="stl_01" style="left:7.5001em;top:21.1833em;z-index:681;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.3354em;">How much does copying the backup to the destination affect the server</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_34">s &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:22.2333em;"><span class="stl_154 stl_32 stl_28">performance? &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:23.8552em;"><span class="stl_155 stl_41 stl_115" style="word-spacing:0.0084em;">Recovery time &nbsp;</span></div>
					<div class="stl_01" style="left:7.4996em;top:24.9166em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.0222em;">How long does it take to copy your backup image from its storage location to the &nbsp;</span></div>
					<div class="stl_01" style="left:7.5em;top:25.9666em;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0038em;">MySQL server, replay binary logs, and so on? &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:27.5166em;z-index:857;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0584em;">The biggest trade-off is backup time versus backup load. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0612em;">u can often improve one &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:28.5666em;z-index:888;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.1132em;">at the other</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1085em;">s </span><span class="stl_154 stl_32 stl_28">e</span><span class="stl_154 stl_32 stl_74" style="word-spacing:0.1102em;">xpense; for example, you can prioritize the backup at the expense of &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:29.6166em;z-index:991;"><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0038em;">causing more performance degradation on the server. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:31.1666em;z-index:993;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.057em;">u can also design your backups to take advantage of load patterns. For instance, if &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:32.2166em;"><span class="stl_154 stl_32 stl_125" style="word-spacing:0.0154em;">your server is only 50% loaded for eight hours during the night, you can try to design &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:33.2666em;"><span class="stl_154 stl_32 stl_87" style="word-spacing:0.0705em;">your backups to load the server less than 50% and still complete within eight hours. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:34.3052em;z-index:1204;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_33" style="word-spacing:0.1067em;">u can accomplish this in many ways: for example, you can use </span><span class="stl_155 stl_41 stl_356" style="word-spacing:0.1172em;">ionice </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1024em;">and </span><span class="stl_155 stl_41 stl_49" style="word-spacing:0.1191em;">nice </span><span class="stl_154 stl_32 stl_28">to &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:35.3666em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.149em;">prioritize the copy or compression operations, use different compression levels, or &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:36.4166em;z-index:1399;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.1106em;">compress the data on the backup server instead of the MySQL server. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1072em;">u can also &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:37.5047em;z-index:1442;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0533em;">use </span><span class="stl_155 stl_41 stl_135" style="word-spacing:0.0483em;">lzo </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0533em;">or </span><span class="stl_155 stl_41 stl_194" style="word-spacing:0.0647em;">pigz </span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0554em;">for faster compression. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0533em;">u can use </span><span class="stl_170 stl_171 stl_28">O_DIREC</span><span class="stl_170 stl_171 stl_482">T</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0533em;">or </span><span class="stl_170 stl_171 stl_28">fadvise(</span><span class="stl_170 stl_171 stl_482">)</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0533em;">to bypass &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:38.566em;z-index:1551;"><span class="stl_154 stl_32 stl_116" style="word-spacing:0.0433em;">the operating system’s cache for the copy operations, so they don’t pollute the server’s &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:39.616em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0905em;">caches. </span><span class="stl_154 stl_32 stl_105">T</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_71" style="word-spacing:0.0963em;">ols such as Percona XtraBackup and MySQL Enterprise Backup also have &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:40.7041em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.164em;">throttling options, and you can use </span><span class="stl_155 stl_41 stl_255" style="word-spacing:0.188em;">pv </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.164em;">with the </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0884em;">--rate-limit </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.164em;">option to limit the &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:41.7655em;"><span class="stl_154 stl_32 stl_53" style="word-spacing:0.0013em;">throughput of scripts you write yourself. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">262 &nbsp;</span></div>
					<div class="stl_01" style="left:7.6682em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.5757em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 10: Backup and Recovery &nbsp;</span></div>
				</div>
			</div>
		</div>
	</body>
</html>