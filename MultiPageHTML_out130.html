<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_135.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_135.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.3052em;"><span class="stl_154 stl_32 stl_124" style="word-spacing:0.0133em;">different locations; we’re just advising you to make sure the </span><span class="stl_155 stl_41 stl_355" style="word-spacing:0.0428em;">my.cnf </span><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0027em;">file mentions those &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:5.3666em;"><span class="stl_154 stl_32 stl_162" style="word-spacing:0.0081em;">locations explicitly, so they won’t change and break things if you upgrade the server.) &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:6.9052em;z-index:152;"><span class="stl_154 stl_32 stl_52" style="word-spacing:0.254em;">We </span><span class="stl_154 stl_32 stl_28">a</span><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0629em;">lso specified that </span><span class="stl_155 stl_41 stl_100" style="word-spacing:0.0684em;">mysqld </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.06em;">should run as the </span><span class="stl_155 stl_41 stl_25" style="word-spacing:0.069em;">mysql </span><span class="stl_154 stl_32 stl_36" style="word-spacing:0.0638em;">user account on the operating &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:7.9666em;z-index:228;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0733em;">system. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_35" style="word-spacing:0.0761em;">u’ll need to make sure this account exists and that it owns the data direc‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:9.066em;"><span class="stl_154 stl_32 stl_126" style="word-spacing:0.088em;">tory and all files within. The port is set to the default of </span><span class="stl_170 stl_171 stl_28">3306</span><span class="stl_154 stl_32 stl_88" style="word-spacing:0.0897em;">, but sometimes you’ll &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:10.116em;"><span class="stl_154 stl_32 stl_71" style="word-spacing:0.0058em;">want to change that. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:11.7155em;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.1625em;">In MySQL 8.0, a new configuration option, </span><span class="stl_170 stl_171 stl_28">innodb_dedicated_server</span><span class="stl_154 stl_32 stl_24" style="word-spacing:0.1643em;">, was intro‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:12.7655em;"><span class="stl_154 stl_32 stl_188" style="word-spacing:0.0254em;">duced. This option examines the available memory on the server and configures four &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:13.8649em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.3019em;">additional variables (</span><span class="stl_170 stl_171 stl_28">innodb_buffer_pool_size</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.3019em;">, </span><span class="stl_170 stl_171 stl_28">innodb_log_file_size</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.3019em;">, </span><span class="stl_170 stl_171 stl_28">innodb_ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:14.9643em;"><span class="stl_170 stl_171 stl_247">log_files_in_group</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0166em;">, and </span><span class="stl_170 stl_171 stl_28">innodb_flush_method</span><span class="stl_154 stl_32 stl_71" style="word-spacing:0.0222em;">) appropriately for a dedicated data‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:16.0143em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0358em;">base server, which simplifies calculating and changing these values. This can be espe‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:17.0643em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.1062em;">cially useful in a cloud environment, where you might run a virtual machine (VM) &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:18.1143em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.1051em;">with 128 GB of RAM and then reboot it to scale up to 256 GB RAM. MySQL here &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:19.1643em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.0711em;">would be self-configuring, and you don’t need to manage changing the values in the &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:20.2143em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0014em;">configuration file. This is often the best way to manage these four settings. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:21.7643em;"><span class="stl_154 stl_32 stl_84" style="word-spacing:0.0564em;">Most of the other settings in our sample file are pretty self-explanatory, and many of &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:22.8143em;z-index:1093;"><span class="stl_154 stl_32 stl_54" style="word-spacing:0.0808em;">them are a matter of judgment. </span><span class="stl_154 stl_32 stl_52">W</span><span class="stl_154 stl_32 stl_219">e</span><span class="stl_154 stl_32 stl_220">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0768em;">ll explore several of them throughout the rest of &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:23.8643em;"><span class="stl_154 stl_32 stl_145" style="word-spacing:0.052em;">this chapter. We’ll also discuss some safety settings later in this chapter, which can be &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:24.9143em;"><span class="stl_154 stl_32 stl_125" style="word-spacing:0.0151em;">very helpful for making your server more robust and helping to prevent bad data and &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:25.9643em;z-index:1294;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">other problems. </span><span class="stl_154 stl_32 stl_52">W</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">e </span><span class="stl_154 stl_32 stl_28">d</span><span class="stl_154 stl_32 stl_25" style="word-spacing:0.011em;">on’t show those settings here. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:27.5638em;z-index:1373;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0254em;">One setting to explain here is the </span><span class="stl_170 stl_171 stl_28">open_files_limi</span><span class="stl_170 stl_171 stl_338">t</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0254em;">option. </span><span class="stl_154 stl_32 stl_52">W</span><span class="stl_154 stl_32 stl_153" style="word-spacing:0.0383em;">e’ve set this as large as &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:28.6138em;"><span class="stl_154 stl_32 stl_87" style="word-spacing:0.0062em;">possible on a typical Linux system. Open file handles are very cheap on modern oper‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:29.6638em;"><span class="stl_154 stl_32 stl_124" style="word-spacing:0.1189em;">ating systems. If this setting isn’t large enough, you’ll see error 24, “too many open &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:30.7138em;z-index:1542;"><span class="stl_154 stl_32 stl_28">files</span><span class="stl_154 stl_32 stl_161">.</span><span class="stl_154 stl_32 stl_161">” &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:32.2638em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.079em;">Skipping all the way to the end, the last section in the configuration file is for client &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:33.3024em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0788em;">programs like </span><span class="stl_155 stl_41 stl_25" style="word-spacing:0.0878em;">mysql </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0788em;">and </span><span class="stl_155 stl_41 stl_356" style="word-spacing:0.0937em;">mysqladmin </span><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0803em;">and simply lets them know how to connect to &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:34.3638em;z-index:1692;"><span class="stl_154 stl_32 stl_115" style="word-spacing:0.0248em;">the server. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_74" style="word-spacing:0.018em;">u should set the values for client programs to match those you chose for &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:35.4138em;z-index:1761;"><span class="stl_154 stl_32 stl_17" style="word-spacing:0.0085em;">the server. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:37.2981em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Inspecting MySQL Server Status Variables &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:39.2473em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.066em;">Sometimes you can use the output from </span><span class="stl_170 stl_171 stl_28" style="word-spacing:-0.0198em;">SHOW GLOBAL STATUS </span><span class="stl_154 stl_32 stl_77" style="word-spacing:0.0692em;">as input to your con‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:40.2973em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.2494em;">figuration to help customize the settings better for your workload. For the best &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:41.3473em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.039em;">results, look both at absolute values and at how the values change over time, prefera‐ &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:42.3973em;z-index:2049;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0083em;">bly with several snapshots at peak and off-peak times. </span><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0063em;">u can use the following com‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:43.4473em;"><span class="stl_154 stl_32 stl_87" style="word-spacing:0.0004em;">mand to see incremental changes to status variables every 60 seconds: &nbsp;</span></div>
					<div class="stl_01" style="left:7.4169em;top:45.2092em;"><span class="stl_200 stl_171 stl_28">$ </span><span class="stl_265 stl_173 stl_28">mysqladmin extended-status -ri60 &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:46.3473em;z-index:2164;"><span class="stl_154 stl_32 stl_52" style="word-spacing:0.2167em;">We </span><span class="stl_154 stl_32 stl_28">w</span><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0241em;">ill frequently refer to changes in status variables over time as we explain various &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:47.3973em;z-index:2259;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.1334em;">configuration settings. </span><span class="stl_154 stl_32 stl_52">W</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1315em;">e </span><span class="stl_154 stl_32 stl_28">w</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1315em;">ill usually expect you to be examining the output of a &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">108 &nbsp;</span></div>
					<div class="stl_01" style="left:7.668em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.5755em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 5: Optimizing Server Settings &nbsp;</span></div>
					<a name="130_0" style="position:absolute;left:0em;top:37.5912em;">&nbsp;</a>
					<a name="130_1" style="position:absolute;left:0em;top:39.4766em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>