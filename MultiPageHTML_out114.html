<!DOCTYPE html><!--[if IE]>  <html class="stl_ie"> <![endif]-->
<html>
	<head>
		<meta charset="utf-8" />
		<title>
		</title>
		<link rel="stylesheet" type="text/css" href="MultiPageHTML_out_files/style.css" />
	</head>
	<body>
		<div class="stl_ stl_02">
			<div class="stl_03">
				<object data="MultiPageHTML_out_files/img_120.svg" type="image/svg+xml" class="stl_04" style="position:absolute; width:42em; height:55.0833em;">
					<embed src="MultiPageHTML_out_files/img_120.svg" type="image/svg+xml" />
				</object>
			</div>
			<div class="stl_view">
				<div class="stl_05 stl_06">
					<div class="stl_01" style="left:6em;top:4.366em;z-index:28;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0293em;">Another option is to use MySQ</span><span class="stl_154 stl_32 stl_94">L</span><span class="stl_154 stl_32 stl_34" style="word-spacing:0.2157em;">’s </span><span class="stl_170 stl_171 stl_28">memloc</span><span class="stl_170 stl_171 stl_338">k</span><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0293em;">configuration option, which locks MySQL &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:5.416em;z-index:130;"><span class="stl_154 stl_32 stl_47" style="word-spacing:0.0867em;">in memory. This will avoid swapping, but it can be dangerous: if there</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0806em;">s </span><span class="stl_154 stl_32 stl_28">n</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0806em;">ot enough &nbsp;</span></div>
					<div class="stl_01" style="left:6.0003em;top:6.466em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0107em;">lockable memory left, MySQL can crash when it tries to allocate more memory. Prob‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:7.516em;z-index:260;"><span class="stl_154 stl_32 stl_48" style="word-spacing:0.0324em;">lems can also be caused if too much memory is locked and there</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0289em;">s </span><span class="stl_154 stl_32 stl_28">n</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0289em;">ot enough left for &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:8.566em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0024em;">the operating system. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:10.116em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0549em;">Many of the tricks are specific to a kernel version, so be careful, especially when you &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:11.166em;z-index:438;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0671em;">upgrade. In some workloads, it</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0646em;">s </span><span class="stl_154 stl_32 stl_28">h</span><span class="stl_154 stl_32 stl_99" style="word-spacing:0.0711em;">ard to make the operating system behave sensibly, &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:12.216em;"><span class="stl_154 stl_32 stl_140" style="word-spacing:0.0007em;">and your only recourse might be to lower the buffer sizes to suboptimal values. &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:14.1003em;"><span class="stl_180 stl_27 stl_28" style="word-spacing:0em;">Operating System Status &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:16.0001em;z-index:527;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_57" style="word-spacing:0.0487em;">ur operating system provides tools to help you find out what the operating system &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:17.0501em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0745em;">and hardware are doing. In this section, we’ll show you examples of how to use two &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:18.0887em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0205em;">widely available tools, </span><span class="stl_155 stl_41 stl_248" style="word-spacing:0.0368em;">iostat </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.018em;">and </span><span class="stl_155 stl_41 stl_85">vmstat</span><span class="stl_154 stl_32 stl_138" style="word-spacing:0.0257em;">. If your system doesn’t provide either of these &nbsp;</span></div>
					<div class="stl_01" style="left:5.9997em;top:19.1501em;"><span class="stl_154 stl_32 stl_124" style="word-spacing:0.0641em;">tools, chances are it will provide something similar. Thus, our goal isn’t to make you &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:20.1887em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.1446em;">an expert at using </span><span class="stl_155 stl_41 stl_248" style="word-spacing:0.16em;">iostat </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1412em;">or </span><span class="stl_155 stl_41 stl_81" style="word-spacing:0.1508em;">vmstat </span><span class="stl_154 stl_32 stl_97" style="word-spacing:0.1442em;">but simply to show you what to look for when &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:21.2501em;"><span class="stl_154 stl_32 stl_83" style="word-spacing:0.0024em;">you’re trying to diagnose problems with tools such as these. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:22.7887em;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.0047em;">In addition to these tools, your operating system might provide others, such as </span><span class="stl_155 stl_41 stl_221">mpstat &nbsp;</span></div>
					<div class="stl_01" style="left:6.0004em;top:23.8387em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1308em;">or </span><span class="stl_155 stl_41 stl_17">sar</span><span class="stl_154 stl_32 stl_54" style="word-spacing:0.1348em;">. If you’re interested in other parts of your system, such as the network, you &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:24.8887em;"><span class="stl_154 stl_32 stl_33" style="word-spacing:0.028em;">might want to use tools such as </span><span class="stl_216 stl_41 stl_28">i</span><span class="stl_256 stl_41 stl_28">f</span><span class="stl_216 stl_41 stl_28" style="word-spacing:0.001em;">conﬁg </span><span class="stl_154 stl_32 stl_97" style="word-spacing:0.0267em;">(which shows how many network errors have &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:25.9387em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">occurred, among other things) or </span><span class="stl_155 stl_41 stl_49" style="word-spacing:0.0167em;">netstat </span><span class="stl_154 stl_32 stl_28">instead. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:27.4887em;"><span class="stl_154 stl_32 stl_38" style="word-spacing:0.1057em;">By default, </span><span class="stl_155 stl_41 stl_81" style="word-spacing:0.1105em;">vmstat </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.1009em;">and </span><span class="stl_155 stl_41 stl_248" style="word-spacing:0.1197em;">iostat </span><span class="stl_154 stl_32 stl_88" style="word-spacing:0.1019em;">produce just one report showing the average values of &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:28.5501em;"><span class="stl_154 stl_32 stl_74" style="word-spacing:0.0492em;">various counters since the server was started, which is not very useful. However, you &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:29.6001em;"><span class="stl_154 stl_32 stl_95" style="word-spacing:0.1989em;">can give both tools an interval argument. This makes them generate incremental &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:30.6501em;"><span class="stl_154 stl_32 stl_84" style="word-spacing:0.1364em;">reports showing what the server is doing right now, which is much more relevant. &nbsp;</span></div>
					<div class="stl_01" style="left:6em;top:31.7001em;"><span class="stl_154 stl_32 stl_158" style="word-spacing:0.1086em;">(The first line shows the statistics since the system was started; you can just ignore &nbsp;</span></div>
					<div class="stl_01" style="left:5.9998em;top:32.7501em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">this line.) &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:34.807em;"><span class="stl_193 stl_27 stl_28" style="word-spacing:0em;">How to read vmstat output &nbsp;</span></div>
					<div class="stl_01" style="left:5.9996em;top:36.2631em;"><span class="stl_154 stl_32 stl_201" style="word-spacing:0.0927em;">Let’s look at an example of </span><span class="stl_155 stl_41 stl_81" style="word-spacing:0.0823em;">vmstat </span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0727em;">first. </span><span class="stl_154 stl_32 stl_105">T</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0727em;">o </span><span class="stl_154 stl_32 stl_28">m</span><span class="stl_154 stl_32 stl_125" style="word-spacing:0.0719em;">ake it print out a new report every five &nbsp;</span></div>
					<div class="stl_01" style="left:6.0002em;top:37.3244em;"><span class="stl_154 stl_32 stl_28" style="word-spacing:0em;">seconds, reporting sizes in megabytes, use the following command: &nbsp;</span></div>
					<div class="stl_01" style="left:7.4167em;top:39.0863em;"><span class="stl_200 stl_171 stl_28">$ </span><span class="stl_265 stl_173 stl_28">vmstat -SM 5 &nbsp;</span></div>
					<div class="stl_01" style="left:7.4167em;top:39.937em;"><span class="stl_200 stl_171 stl_28">procs -------memory------- -swap- -----io---- ---system---- ------cpu----- &nbsp;</span></div>
					<div class="stl_01" style="left:7.7708em;top:40.787em;"><span class="stl_200 stl_171 stl_28">r</span></div>
					<div class="stl_01" style="left:7.4167em;top:41.637em;"><span class="stl_200 stl_171 stl_28">11 &nbsp;</span></div>
					<div class="stl_01" style="left:7.4167em;top:42.487em;"><span class="stl_200 stl_171 stl_28">10 &nbsp;</span></div>
					<div class="stl_01" style="left:8.8333em;top:40.787em;"><span class="stl_200 stl_171 stl_28">b swpd free buff cache</span><span class="stl_200 stl_171 stl_28" style="word-spacing:0.5em;">&nbsp;</span><span class="stl_200 stl_171 stl_28">si so &nbsp;</span></div>
					<div class="stl_01" style="left:20.5208em;top:40.787em;"><span class="stl_200 stl_171 stl_28">bi &nbsp;</span></div>
					<div class="stl_01" style="left:19.8125em;top:41.637em;"><span class="stl_200 stl_171 stl_28">9902 35594 122585 150834 10</span><span class="stl_200 stl_171 stl_28" style="word-spacing:0.5em;">&nbsp;</span><span class="stl_200 stl_171 stl_28">3 85 &nbsp;</span></div>
					<div class="stl_01" style="left:18.75em;top:42.487em;"><span class="stl_200 stl_171 stl_28">0 23998 35391 124187 149530 11</span><span class="stl_200 stl_171 stl_28" style="word-spacing:0.5em;">&nbsp;</span><span class="stl_200 stl_171 stl_28">3 84 &nbsp;</span></div>
					<div class="stl_01" style="left:22.6458em;top:40.787em;"><span class="stl_200 stl_171 stl_28">bo &nbsp;</span></div>
					<div class="stl_01" style="left:25.125em;top:40.787em;"><span class="stl_200 stl_171 stl_28">in &nbsp;</span></div>
					<div class="stl_01" style="left:27.6042em;top:40.787em;"><span class="stl_200 stl_171 stl_28">cs us sy id wa st &nbsp;</span></div>
					<div class="stl_01" style="left:8.8333em;top:41.637em;"><span class="stl_200 stl_171 stl_28">0</span></div>
					<div class="stl_01" style="left:8.8333em;top:42.487em;"><span class="stl_200 stl_171 stl_28">2</span></div>
					<div class="stl_01" style="left:10.6042em;top:41.637em;"><span class="stl_200 stl_171 stl_28">0 2410 &nbsp;</span></div>
					<div class="stl_01" style="left:10.6042em;top:42.487em;"><span class="stl_200 stl_171 stl_28">0 2361 &nbsp;</span></div>
					<div class="stl_01" style="left:14.1458em;top:41.637em;"><span class="stl_200 stl_171 stl_28">4 57223 &nbsp;</span></div>
					<div class="stl_01" style="left:14.1458em;top:42.487em;"><span class="stl_200 stl_171 stl_28">4 57273 &nbsp;</span></div>
					<div class="stl_01" style="left:17.6875em;top:41.637em;"><span class="stl_200 stl_171 stl_28">0</span></div>
					<div class="stl_01" style="left:17.6875em;top:42.487em;"><span class="stl_200 stl_171 stl_28">0</span></div>
					<div class="stl_01" style="left:18.75em;top:41.637em;"><span class="stl_200 stl_171 stl_28">0</span></div>
					<div class="stl_01" style="left:32.2083em;top:41.637em;"><span class="stl_200 stl_171 stl_28">1</span></div>
					<div class="stl_01" style="left:32.2083em;top:42.487em;"><span class="stl_200 stl_171 stl_28">2</span></div>
					<div class="stl_01" style="left:33.2708em;top:41.637em;"><span class="stl_200 stl_171 stl_28">0</span></div>
					<div class="stl_01" style="left:33.2708em;top:42.487em;"><span class="stl_200 stl_171 stl_28">0</span></div>
					<div class="stl_01" style="left:6.0004em;top:43.6131em;z-index:1894;"><span class="stl_154 stl_32 stl_109">Y</span><span class="stl_154 stl_32 stl_28">o</span><span class="stl_154 stl_32 stl_28" style="word-spacing:0.0358em;">u can stop </span><span class="stl_155 stl_41 stl_81" style="word-spacing:0.0454em;">vmstat </span><span class="stl_154 stl_32 stl_88" style="word-spacing:0.0367em;">with Ctrl-C. The output you see depends on your operating sys‐ &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:44.6745em;"><span class="stl_154 stl_32 stl_73" style="word-spacing:0.0021em;">tem, so you might need to read the manual page to figure it out. &nbsp;</span></div>
					<div class="stl_01" style="left:6.0001em;top:46.2245em;"><span class="stl_154 stl_32 stl_39" style="word-spacing:0.0258em;">As stated earlier, even though we asked for incremental output, the first line of values &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:47.2744em;z-index:2149;"><span class="stl_154 stl_32 stl_78" style="word-spacing:0.2899em;">shows the averages since the server was booted. The second line shows what</span><span class="stl_154 stl_32 stl_34">’</span><span class="stl_154 stl_32 stl_34">s &nbsp;</span></div>
					<div class="stl_01" style="left:5.9999em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">92 &nbsp;</span></div>
					<div class="stl_01" style="left:7.3619em;top:50.8098em;"><span class="stl_80 stl_27 stl_28">|</span></div>
					<div class="stl_01" style="left:8.2694em;top:50.8098em;"><span class="stl_80 stl_27 stl_28" style="word-spacing:0em;">Chapter 4: Operating System and Hardware Optimization &nbsp;</span></div>
					<a name="114_0" style="position:absolute;left:0em;top:14.3934em;">&nbsp;</a>
					<a name="114_1" style="position:absolute;left:0em;top:12.4453em;">&nbsp;</a>
					<a name="114_2" style="position:absolute;left:0em;top:16.2294em;">&nbsp;</a>
					<a name="114_3" style="position:absolute;left:0em;top:18.3294em;">&nbsp;</a>
					<a name="114_4" style="position:absolute;left:0em;top:4.5953em;">&nbsp;</a>
					<a name="114_5" style="position:absolute;left:0em;top:23.0294em;">&nbsp;</a>
					<a name="114_6" style="position:absolute;left:0em;top:36.5037em;">&nbsp;</a>
				</div>
			</div>
		</div>
	</body>
</html>